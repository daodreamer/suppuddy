# Sprint 5 ä»»åŠ¡æ¸…å• - æ¡å½¢ç æ‰«æ & äº§å“æœç´¢

## ğŸ“‹ Sprint æ¦‚è§ˆ

**Sprint å‘¨æœŸ**: Week 9-10
**Sprint ç›®æ ‡**: å¢å¼ºäº§å“æ·»åŠ ä½“éªŒï¼Œå®ç°æ¡å½¢ç æ‰«æå’Œäº§å“æ•°æ®åº“æœç´¢åŠŸèƒ½
**æ–¹æ³•è®º**: Test-Driven Development (TDD)
**å‰ç½®æ¡ä»¶**: Sprint 4 å·²å®Œæˆ âœ…

---

## ğŸ¯ ç”¨æˆ·æ•…äº‹ (User Stories)

### Story 1: æ‰«æäº§å“æ¡å½¢ç 
**ä½œä¸º** ç”¨æˆ·
**æˆ‘æƒ³è¦** ä½¿ç”¨ç›¸æœºæ‰«æè¡¥å‰‚äº§å“çš„æ¡å½¢ç 
**ä»¥ä¾¿** å¿«é€Ÿæ·»åŠ äº§å“è€Œæ— éœ€æ‰‹åŠ¨è¾“å…¥

**éªŒæ”¶æ ‡å‡†**:
- [ ] èƒ½å¯åŠ¨ç›¸æœºè¿›è¡Œæ¡å½¢ç æ‰«æ
- [ ] æ”¯æŒå¸¸è§æ¡å½¢ç æ ¼å¼ï¼ˆEAN-13, UPC-A, Code 128ç­‰ï¼‰
- [ ] æ‰«ææˆåŠŸåè‡ªåŠ¨è¯†åˆ«æ¡å½¢ç 
- [ ] æ‰«æå¤±è´¥æœ‰æ¸…æ™°çš„é”™è¯¯æç¤º
- [ ] ç›¸æœºæƒé™å¤„ç†æµç•…
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼ˆ>85% è¦†ç›–ç‡ï¼‰

### Story 2: ä»äº§å“æ•°æ®åº“è·å–ä¿¡æ¯
**ä½œä¸º** ç”¨æˆ·
**æˆ‘æƒ³è¦** æ‰«ææ¡å½¢ç åè‡ªåŠ¨è·å–äº§å“ä¿¡æ¯
**ä»¥ä¾¿** çœå»æ‰‹åŠ¨å¡«å†™äº§å“è¯¦æƒ…çš„éº»çƒ¦

**éªŒæ”¶æ ‡å‡†**:
- [ ] èƒ½é€šè¿‡æ¡å½¢ç æŸ¥è¯¢ Open Food Facts API
- [ ] è‡ªåŠ¨å¡«å……äº§å“åç§°ã€å“ç‰Œã€è¥å…»æˆåˆ†
- [ ] æœªæ‰¾åˆ°äº§å“æ—¶æç¤ºç”¨æˆ·æ‰‹åŠ¨è¾“å…¥
- [ ] ç½‘ç»œé”™è¯¯æœ‰é€‚å½“çš„é”™è¯¯å¤„ç†
- [ ] æ”¯æŒç¦»çº¿æ¨¡å¼ï¼ˆæ˜¾ç¤ºæç¤ºï¼‰
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼ˆ>85% è¦†ç›–ç‡ï¼‰

### Story 3: æœç´¢äº§å“æ•°æ®åº“
**ä½œä¸º** ç”¨æˆ·
**æˆ‘æƒ³è¦** é€šè¿‡å…³é”®è¯æœç´¢äº§å“æ•°æ®åº“
**ä»¥ä¾¿** æ‰¾åˆ°å¸¸è§çš„è¡¥å‰‚äº§å“

**éªŒæ”¶æ ‡å‡†**:
- [ ] èƒ½è¾“å…¥å…³é”®è¯æœç´¢äº§å“
- [ ] æœç´¢ç»“æœåˆ†é¡µåŠ è½½
- [ ] æ˜¾ç¤ºäº§å“åç§°ã€å“ç‰Œã€å›¾ç‰‡é¢„è§ˆ
- [ ] é€‰æ‹©äº§å“åè‡ªåŠ¨å¡«å……è¡¨å•
- [ ] æœç´¢æœ‰å»æŠ–åŠ¨å¤„ç†
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡

### Story 4: ç›¸æœºæƒé™ç®¡ç†
**ä½œä¸º** ç”¨æˆ·
**æˆ‘æƒ³è¦** åº”ç”¨ä¼˜é›…åœ°å¤„ç†ç›¸æœºæƒé™
**ä»¥ä¾¿** æ˜ç¡®çŸ¥é“ä¸ºä»€ä¹ˆéœ€è¦ç›¸æœºæƒé™

**éªŒæ”¶æ ‡å‡†**:
- [ ] é¦–æ¬¡ä½¿ç”¨æ—¶æ˜¾ç¤ºæƒé™è¯´æ˜
- [ ] æƒé™è¢«æ‹’ç»æ—¶æä¾›è·³è½¬è®¾ç½®çš„å…¥å£
- [ ] æƒé™çŠ¶æ€å˜åŒ–æ—¶ UI æ­£ç¡®æ›´æ–°
- [ ] ä¸å¼ºåˆ¶è¦æ±‚æƒé™ï¼ˆå¯é€‰åŠŸèƒ½ï¼‰
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡

### Story 5: æ‰«æå†å²è®°å½•
**ä½œä¸º** ç”¨æˆ·
**æˆ‘æƒ³è¦** æŸ¥çœ‹æœ€è¿‘æ‰«æçš„äº§å“
**ä»¥ä¾¿** å¿«é€Ÿé‡æ–°æ·»åŠ ä¹‹å‰æ‰«æè¿‡çš„äº§å“

**éªŒæ”¶æ ‡å‡†**:
- [ ] ä¿å­˜æœ€è¿‘æ‰«æçš„æ¡å½¢ç å’Œäº§å“ä¿¡æ¯
- [ ] æ˜¾ç¤ºæœ€è¿‘ 10-20 æ¡æ‰«æè®°å½•
- [ ] èƒ½ä»å†å²è®°å½•å¿«é€Ÿæ·»åŠ äº§å“
- [ ] èƒ½æ¸…é™¤æ‰«æå†å²
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡

---

## ğŸ“ è¯¦ç»†ä»»åŠ¡åˆ†è§£

### Phase 1: æ•°æ®æ¨¡å‹å±‚ (Models)

#### Task 1.1: åˆ›å»º ScannedProduct æ¨¡å‹
**ä¼˜å…ˆçº§**: ğŸ”´ High
**ä¼°æ—¶**: TDD å¾ªç¯
**ä¾èµ–**: Sprint 4 å®Œæˆ

**TDD æ­¥éª¤**:
1. ç¼–å†™ ScannedProductTests.swift æµ‹è¯•æ–‡ä»¶
   - æµ‹è¯•åˆå§‹åŒ–
   - æµ‹è¯•ä» API å“åº”è§£æ
   - æµ‹è¯•è¥å…»æˆåˆ†è½¬æ¢
   - æµ‹è¯• Codable

2. åˆ›å»º ScannedProduct.swift å®ç°
   ```swift
   /// ä»å¤–éƒ¨ API è·å–çš„äº§å“ä¿¡æ¯
   struct ScannedProduct: Codable, Hashable, Sendable {
       let barcode: String
       let name: String
       let brand: String?
       let imageUrl: String?
       let servingSize: String?
       let nutrients: [ScannedNutrient]

       /// è½¬æ¢ä¸ºæœ¬åœ° Supplement æ¨¡å‹
       func toSupplement() -> Supplement
   }

   struct ScannedNutrient: Codable, Hashable, Sendable {
       let name: String
       let amount: Double
       let unit: String

       /// å°è¯•æ˜ å°„åˆ° NutrientType
       func toNutrient() -> Nutrient?
   }
   ```

3. é‡æ„ä¼˜åŒ–

**éªŒæ”¶æ ‡å‡†**:
- [x] èƒ½æ­£ç¡®è§£æ API å“åº” âœ…
- [x] èƒ½è½¬æ¢ä¸ºæœ¬åœ°æ¨¡å‹ âœ…
- [x] è¥å…»æˆåˆ†æ˜ å°„æ­£ç¡® âœ…
- [x] æ‰€æœ‰æµ‹è¯•é€šè¿‡ âœ… (38/38 tests passed)

---

#### Task 1.2: åˆ›å»º ScanHistory æ¨¡å‹
**ä¼˜å…ˆçº§**: ğŸŸ¡ Medium
**ä¼°æ—¶**: TDD å¾ªç¯
**ä¾èµ–**: Task 1.1

**TDD æ­¥éª¤**:
1. ç¼–å†™ ScanHistoryTests.swift æµ‹è¯•æ–‡ä»¶
   - æµ‹è¯•åˆå§‹åŒ–
   - æµ‹è¯• SwiftData æŒä¹…åŒ–
   - æµ‹è¯•æ—¶é—´æˆ³æ’åº

2. åˆ›å»º ScanHistory.swift å®ç°
   ```swift
   @Model
   final class ScanHistory {
       var barcode: String
       var productName: String
       var brand: String?
       var imageUrl: String?
       var scannedAt: Date
       var wasSuccessful: Bool  // æ˜¯å¦æˆåŠŸè·å–äº§å“ä¿¡æ¯

       /// ç¼“å­˜çš„äº§å“æ•°æ®ï¼ˆJSONï¼‰
       @Attribute(.transformable(by: "NSSecureUnarchiveFromDataTransformer"))
       private var productData: Data?

       var cachedProduct: ScannedProduct? { get set }
   }
   ```

3. é‡æ„ä¼˜åŒ–

**éªŒæ”¶æ ‡å‡†**:
- [x] èƒ½æŒä¹…åŒ–æ‰«æå†å² âœ…
- [x] èƒ½ç¼“å­˜äº§å“æ•°æ® âœ…
- [x] æŒ‰æ—¶é—´æ’åºæ­£ç¡® âœ…
- [x] æ‰€æœ‰æµ‹è¯•é€šè¿‡ âœ… (28/28 tests passed)

---

#### Task 1.3: åˆ›å»º ProductSearchResult æ¨¡å‹
**ä¼˜å…ˆçº§**: ğŸŸ¡ Medium
**ä¼°æ—¶**: TDD å¾ªç¯
**ä¾èµ–**: Task 1.1

**TDD æ­¥éª¤**:
1. ç¼–å†™ ProductSearchResultTests.swift
   - æµ‹è¯•åˆ†é¡µæ•°æ®è§£æ
   - æµ‹è¯•äº§å“åˆ—è¡¨è§£æ

2. åˆ›å»º ProductSearchResult.swift å®ç°
   ```swift
   /// äº§å“æœç´¢ç»“æœï¼ˆåˆ†é¡µï¼‰
   struct ProductSearchResult: Codable, Sendable {
       let products: [ScannedProduct]
       let totalCount: Int
       let page: Int
       let pageSize: Int

       var hasMorePages: Bool {
           page * pageSize < totalCount
       }
   }
   ```

3. é‡æ„ä¼˜åŒ–

**éªŒæ”¶æ ‡å‡†**:
- [x] èƒ½æ­£ç¡®è§£æåˆ†é¡µæ•°æ® âœ…
- [x] hasMorePages è®¡ç®—æ­£ç¡® âœ…
- [x] æ‰€æœ‰æµ‹è¯•é€šè¿‡ âœ… (34/34 tests passed)

---

### Phase 2: æ•°æ®è®¿é—®å±‚ (Repositories & API)

#### Task 2.1: åˆ›å»º ScanHistoryRepository
**ä¼˜å…ˆçº§**: ğŸŸ¡ Medium
**ä¼°æ—¶**: TDD å¾ªç¯
**ä¾èµ–**: Task 1.2

**TDD æ­¥éª¤**:
1. ç¼–å†™ ScanHistoryRepositoryTests.swift
   ```swift
   @Suite("ScanHistoryRepository Tests")
   struct ScanHistoryRepositoryTests {
       @Suite("Save Tests")
       @Suite("Fetch Tests")
       @Suite("Delete Tests")
       @Suite("Limit Tests")
   }
   ```

2. å®ç° ScanHistoryRepository.swift
   ```swift
   @MainActor
   final class ScanHistoryRepository {
       private let modelContext: ModelContext
       private let maxHistoryCount = 20

       func save(_ history: ScanHistory) async throws
       func getAll() async throws -> [ScanHistory]
       func getRecent(limit: Int) async throws -> [ScanHistory]
       func getByBarcode(_ barcode: String) async throws -> ScanHistory?
       func delete(_ history: ScanHistory) async throws
       func clearAll() async throws
       func pruneOldEntries() async throws  // ä¿ç•™æœ€è¿‘ N æ¡
   }
   ```

3. é‡æ„ä¼˜åŒ–

**éªŒæ”¶æ ‡å‡†**:
- [x] å®Œæ•´ CRUD æ“ä½œ âœ…
- [x] æ”¯æŒé™åˆ¶æ•°é‡ âœ…
- [x] æ”¯æŒæŒ‰æ¡å½¢ç æŸ¥è¯¢ âœ…
- [x] æµ‹è¯•è¦†ç›–ç‡ > 90% âœ…
- [x] æ‰€æœ‰æµ‹è¯•é€šè¿‡ âœ… (28/28 tests passed)

---

#### Task 2.2: åˆ›å»º OpenFoodFactsAPI å®¢æˆ·ç«¯
**ä¼˜å…ˆçº§**: ğŸ”´ High
**ä¼°æ—¶**: TDD å¾ªç¯
**ä¾èµ–**: Task 1.1

**TDD æ­¥éª¤**:
1. ç¼–å†™ OpenFoodFactsAPITests.swift
   - æµ‹è¯•æ¡å½¢ç æŸ¥è¯¢
   - æµ‹è¯•äº§å“æœç´¢
   - æµ‹è¯•é”™è¯¯å¤„ç†
   - ä½¿ç”¨ Mock URLSession

2. å®ç° OpenFoodFactsAPI.swift
   ```swift
   /// Open Food Facts API å®¢æˆ·ç«¯
   actor OpenFoodFactsAPI {
       private let baseURL = "https://world.openfoodfacts.org/api/v2"
       private let session: URLSession

       init(session: URLSession = .shared) {
           self.session = session
       }

       /// é€šè¿‡æ¡å½¢ç è·å–äº§å“
       func getProduct(barcode: String) async throws -> ScannedProduct?

       /// æœç´¢äº§å“
       func searchProducts(
           query: String,
           page: Int,
           pageSize: Int
       ) async throws -> ProductSearchResult

       /// æ£€æŸ¥ API å¯ç”¨æ€§
       func checkAvailability() async -> Bool
   }

   enum OpenFoodFactsError: Error, LocalizedError {
       case productNotFound
       case networkError(Error)
       case invalidResponse
       case rateLimited
       case serverError(Int)

       var errorDescription: String? { ... }
   }
   ```

3. é‡æ„ä¼˜åŒ–

**éªŒæ”¶æ ‡å‡†**:
- [x] èƒ½æŸ¥è¯¢æ¡å½¢ç äº§å“ âœ…
- [x] èƒ½æœç´¢äº§å“ âœ…
- [x] é”™è¯¯å¤„ç†å®Œå–„ âœ…
- [x] æ”¯æŒä¾èµ–æ³¨å…¥ï¼ˆå¯æµ‹è¯•ï¼‰âœ…
- [x] æµ‹è¯•è¦†ç›–ç‡ > 85% âœ…
- [x] æ‰€æœ‰æµ‹è¯•é€šè¿‡ âœ… (22/22 tests passed)

---

### Phase 3: ä¸šåŠ¡é€»è¾‘å±‚ (Services)

#### Task 3.1: åˆ›å»º BarcodeScannerService
**ä¼˜å…ˆçº§**: ğŸ”´ High
**ä¼°æ—¶**: TDD å¾ªç¯
**ä¾èµ–**: æ— 

**TDD æ­¥éª¤**:
1. ç¼–å†™ BarcodeScannerServiceTests.swift
   - æµ‹è¯•æ¡å½¢ç æ ¼å¼éªŒè¯
   - æµ‹è¯•æƒé™æ£€æŸ¥é€»è¾‘
   - ä½¿ç”¨ Protocol æŠ½è±¡ AVFoundation

2. å®ç° BarcodeScannerService.swift
   ```swift
   /// æ¡å½¢ç æ‰«ææœåŠ¡
   final class BarcodeScannerService: NSObject {
       // æƒé™ç®¡ç†
       func checkCameraPermission() async -> AVAuthorizationStatus
       func requestCameraPermission() async -> Bool

       // æ¡å½¢ç éªŒè¯
       func isValidBarcode(_ code: String) -> Bool
       func getBarcodeType(_ code: String) -> BarcodeType?

       // æ‰«æé…ç½®
       func supportedBarcodeTypes() -> [AVMetadataObject.ObjectType]
   }

   enum BarcodeType: String, CaseIterable {
       case ean13 = "EAN-13"
       case ean8 = "EAN-8"
       case upcA = "UPC-A"
       case upcE = "UPC-E"
       case code128 = "Code 128"
       case code39 = "Code 39"
       case qrCode = "QR Code"
   }

   enum CameraPermissionStatus {
       case authorized
       case denied
       case restricted
       case notDetermined
   }
   ```

3. é‡æ„ä¼˜åŒ–

**éªŒæ”¶æ ‡å‡†**:
- [x] èƒ½æ£€æŸ¥ç›¸æœºæƒé™ âœ…
- [x] èƒ½è¯·æ±‚ç›¸æœºæƒé™ âœ…
- [x] èƒ½éªŒè¯æ¡å½¢ç æ ¼å¼ âœ…
- [x] æ”¯æŒå¤šç§æ¡å½¢ç ç±»å‹ âœ…
- [x] æµ‹è¯•è¦†ç›–ç‡ > 85% âœ…
- [x] æ‰€æœ‰æµ‹è¯•é€šè¿‡ âœ… (17/17 tests passed)

---

#### Task 3.2: åˆ›å»º ProductLookupService
**ä¼˜å…ˆçº§**: ğŸ”´ High
**ä¼°æ—¶**: TDD å¾ªç¯
**ä¾èµ–**: Task 2.2, Task 2.1

**TDD æ­¥éª¤**:
1. ç¼–å†™ ProductLookupServiceTests.swift
   - æµ‹è¯•æ¡å½¢ç æŸ¥è¯¢æµç¨‹
   - æµ‹è¯•ç¼“å­˜é€»è¾‘
   - æµ‹è¯•æœç´¢æµç¨‹

2. å®ç° ProductLookupService.swift
   ```swift
   /// äº§å“æŸ¥è¯¢æœåŠ¡ï¼ˆæ•´åˆ API å’Œç¼“å­˜ï¼‰
   final class ProductLookupService {
       private let api: OpenFoodFactsAPI
       private let historyRepository: ScanHistoryRepository

       /// é€šè¿‡æ¡å½¢ç æŸ¥æ‰¾äº§å“ï¼ˆå…ˆæŸ¥ç¼“å­˜ï¼Œå†æŸ¥ APIï¼‰
       func lookupByBarcode(_ barcode: String) async throws -> ScannedProduct?

       /// æœç´¢äº§å“
       func searchProducts(
           query: String,
           page: Int
       ) async throws -> ProductSearchResult

       /// ä¿å­˜æ‰«æå†å²
       func saveScanHistory(
           barcode: String,
           product: ScannedProduct?,
           wasSuccessful: Bool
       ) async throws

       /// è·å–æ‰«æå†å²
       func getRecentScans() async throws -> [ScanHistory]

       /// æ¸…é™¤æ‰«æå†å²
       func clearHistory() async throws

       /// å°†æ‰«æäº§å“è½¬æ¢å¹¶ä¿å­˜ä¸ºæœ¬åœ°è¡¥å‰‚
       func saveAsLocalSupplement(
           _ product: ScannedProduct,
           servingsPerDay: Int
       ) async throws -> Supplement
   }
   ```

3. é‡æ„ä¼˜åŒ–

**éªŒæ”¶æ ‡å‡†**:
- [x] èƒ½æŸ¥æ‰¾äº§å“ï¼ˆå¸¦ç¼“å­˜ï¼‰âœ…
- [x] èƒ½æœç´¢äº§å“ âœ…
- [x] èƒ½ä¿å­˜æ‰«æå†å² âœ…
- [x] èƒ½è½¬æ¢ä¸ºæœ¬åœ°è¡¥å‰‚ âœ…
- [x] æµ‹è¯•è¦†ç›–ç‡ > 85% âœ…
- [x] æ‰€æœ‰æµ‹è¯•é€šè¿‡ âœ… (12/12 tests passed)

---

#### Task 3.3: åˆ›å»º NutrientMappingService
**ä¼˜å…ˆçº§**: ğŸŸ¡ Medium
**ä¼°æ—¶**: TDD å¾ªç¯
**ä¾èµ–**: Task 1.1

**TDD æ­¥éª¤**:
1. ç¼–å†™ NutrientMappingServiceTests.swift
   - æµ‹è¯•è¥å…»ç´ åç§°æ˜ å°„
   - æµ‹è¯•å•ä½è½¬æ¢
   - æµ‹è¯•æ¨¡ç³ŠåŒ¹é…

2. å®ç° NutrientMappingService.swift
   ```swift
   /// å°†å¤–éƒ¨è¥å…»ç´ åç§°æ˜ å°„åˆ°æœ¬åœ° NutrientType
   final class NutrientMappingService {
       /// å°è¯•å°†å¤–éƒ¨è¥å…»ç´ åç§°æ˜ å°„åˆ° NutrientType
       func mapToNutrientType(_ externalName: String) -> NutrientType?

       /// è½¬æ¢è¥å…»ç´ å•ä½
       func convertUnit(
           amount: Double,
           fromUnit: String,
           toUnit: String
       ) -> Double?

       /// æ‰¹é‡æ˜ å°„è¥å…»ç´ 
       func mapNutrients(_ scannedNutrients: [ScannedNutrient]) -> [Nutrient]
   }
   ```

3. é‡æ„ä¼˜åŒ–

**éªŒæ”¶æ ‡å‡†**:
- [x] èƒ½æ˜ å°„å¸¸è§è¥å…»ç´ åç§° âœ…
- [x] æ”¯æŒå¤šè¯­è¨€åç§°ï¼ˆå¾·è¯­ã€è‹±è¯­ï¼‰âœ…
- [x] èƒ½è½¬æ¢å•ä½ âœ…
- [x] æ‰€æœ‰æµ‹è¯•é€šè¿‡ âœ… (21/21 tests passed)

---

### Phase 4: è§†å›¾æ¨¡å‹å±‚ (ViewModels)

#### Task 4.1: åˆ›å»º BarcodeScannerViewModel
**ä¼˜å…ˆçº§**: ğŸ”´ High
**ä¼°æ—¶**: TDD å¾ªç¯
**ä¾èµ–**: Task 3.1, Task 3.2

**TDD æ­¥éª¤**:
1. ç¼–å†™ BarcodeScannerViewModelTests.swift
   - æµ‹è¯•æ‰«æçŠ¶æ€ç®¡ç†
   - æµ‹è¯•æƒé™å¤„ç†
   - æµ‹è¯•äº§å“æŸ¥æ‰¾æµç¨‹

2. å®ç° BarcodeScannerViewModel.swift
   ```swift
   @MainActor
   @Observable
   final class BarcodeScannerViewModel {
       // çŠ¶æ€
       var scanState: ScanState = .idle
       var cameraPermissionStatus: CameraPermissionStatus = .notDetermined
       var scannedProduct: ScannedProduct?
       var errorMessage: String?
       var isLoading: Bool = false

       // æ‰«ææ§åˆ¶
       var isTorchOn: Bool = false
       var isScanning: Bool = false

       func checkPermission() async
       func requestPermission() async
       func startScanning()
       func stopScanning()
       func toggleTorch()

       func handleScannedBarcode(_ barcode: String) async
       func retryLastScan() async
       func clearResult()
   }

   enum ScanState {
       case idle
       case scanning
       case processing
       case found(ScannedProduct)
       case notFound(barcode: String)
       case error(String)
   }
   ```

3. é‡æ„ä¼˜åŒ–

**éªŒæ”¶æ ‡å‡†**:
- [x] ä½¿ç”¨ @Observable å® âœ…
- [x] çŠ¶æ€ç®¡ç†æ¸…æ™° âœ…
- [x] æƒé™å¤„ç†å®Œå–„ âœ…
- [x] æµ‹è¯•è¦†ç›–ç‡ > 70% âœ…
- [x] æ‰€æœ‰æµ‹è¯•é€šè¿‡ âœ… (14/14 tests passed)

---

#### Task 4.2: åˆ›å»º ProductSearchViewModel
**ä¼˜å…ˆçº§**: ğŸ”´ High
**ä¼°æ—¶**: TDD å¾ªç¯
**ä¾èµ–**: Task 3.2

**TDD æ­¥éª¤**:
1. ç¼–å†™ ProductSearchViewModelTests.swift
   - æµ‹è¯•æœç´¢åŠŸèƒ½
   - æµ‹è¯•åˆ†é¡µåŠ è½½
   - æµ‹è¯•å»æŠ–åŠ¨

2. å®ç° ProductSearchViewModel.swift
   ```swift
   @MainActor
   @Observable
   final class ProductSearchViewModel {
       var searchQuery: String = ""
       var searchResults: [ScannedProduct] = []
       var isLoading: Bool = false
       var isLoadingMore: Bool = false
       var hasMoreResults: Bool = false
       var errorMessage: String?

       private var currentPage = 1
       private var searchTask: Task<Void, Never>?

       func search() async
       func loadMore() async
       func clearResults()
       func selectProduct(_ product: ScannedProduct)
   }
   ```

3. é‡æ„ä¼˜åŒ–

**éªŒæ”¶æ ‡å‡†**:
- [x] æœç´¢æœ‰å»æŠ–åŠ¨ âœ…
- [x] æ”¯æŒåˆ†é¡µåŠ è½½ âœ…
- [x] çŠ¶æ€ç®¡ç†æ¸…æ™° âœ…
- [x] æµ‹è¯•è¦†ç›–ç‡ > 70% âœ…
- [x] æ‰€æœ‰æµ‹è¯•é€šè¿‡ âœ… (15/15 tests passed)

---

#### Task 4.3: åˆ›å»º ScanHistoryViewModel
**ä¼˜å…ˆçº§**: ğŸŸ¡ Medium
**ä¼°æ—¶**: TDD å¾ªç¯
**ä¾èµ–**: Task 3.2

**TDD æ­¥éª¤**:
1. ç¼–å†™ ScanHistoryViewModelTests.swift
   - æµ‹è¯•åŠ è½½å†å²
   - æµ‹è¯•åˆ é™¤å†å²

2. å®ç° ScanHistoryViewModel.swift
   ```swift
   @MainActor
   @Observable
   final class ScanHistoryViewModel {
       var scanHistory: [ScanHistory] = []
       var isLoading: Bool = false
       var errorMessage: String?

       func loadHistory() async
       func deleteHistory(_ item: ScanHistory) async
       func clearAllHistory() async
       func selectHistory(_ item: ScanHistory)
   }
   ```

3. é‡æ„ä¼˜åŒ–

**éªŒæ”¶æ ‡å‡†**:
- [x] èƒ½åŠ è½½å†å²è®°å½• âœ…
- [x] èƒ½åˆ é™¤è®°å½• âœ…
- [x] èƒ½æ¸…ç©ºå†å² âœ…
- [x] æµ‹è¯•è¦†ç›–ç‡ > 70% âœ…
- [x] æ‰€æœ‰æµ‹è¯•é€šè¿‡ âœ… (12/12 tests passed)

---

### Phase 5: UI å±‚ (Views)

#### Task 5.1: åˆ›å»º BarcodeScannerView
**ä¼˜å…ˆçº§**: ğŸ”´ High
**ä¼°æ—¶**: UI å®ç°
**ä¾èµ–**: Task 4.1

**å®ç°æ­¥éª¤**:
1. åˆ›å»º BarcodeScannerView.swift
   ```swift
   struct BarcodeScannerView: View {
       @Environment(\.dismiss) private var dismiss
       @State private var viewModel: BarcodeScannerViewModel?
       let onProductScanned: (ScannedProduct) -> Void

       var body: some View {
           ZStack {
               // ç›¸æœºé¢„è§ˆå±‚
               CameraPreviewView(...)

               // æ‰«ææ¡†å åŠ å±‚
               ScannerOverlayView()

               // æ§åˆ¶æŒ‰é’®
               scannerControls

               // ç»“æœ/é”™è¯¯æ˜¾ç¤º
               if let product = viewModel?.scannedProduct {
                   ScannedProductCard(product: product)
               }
           }
           .onAppear { viewModel?.checkPermission() }
       }
   }
   ```

2. åˆ›å»º CameraPreviewViewï¼ˆUIViewRepresentableï¼‰
3. åˆ›å»ºæ‰«ææ¡†åŠ¨ç”»å åŠ å±‚
4. åˆ›å»ºé—ªå…‰ç¯/æ‰‹ç”µç­’æ§åˆ¶
5. åˆ›å»ºæƒé™è¯·æ±‚ç•Œé¢

**éªŒæ”¶æ ‡å‡†**:
- [x] ç›¸æœºé¢„è§ˆæ­£å¸¸æ˜¾ç¤º âœ…
- [x] æ‰«ææ¡†åŠ¨ç”»æµç•… âœ…
- [x] æ‰‹ç”µç­’åŠŸèƒ½æ­£å¸¸ âœ…
- [x] æƒé™å¤„ç†ä¼˜é›… âœ…
- [x] UI ç¾è§‚æ˜“ç”¨ âœ…

---

#### Task 5.2: åˆ›å»º ProductSearchView
**ä¼˜å…ˆçº§**: ğŸ”´ High
**ä¼°æ—¶**: UI å®ç°
**ä¾èµ–**: Task 4.2

**å®ç°æ­¥éª¤**:
1. åˆ›å»º ProductSearchView.swift
   ```swift
   struct ProductSearchView: View {
       @Environment(\.dismiss) private var dismiss
       @State private var viewModel: ProductSearchViewModel?
       let onProductSelected: (ScannedProduct) -> Void

       var body: some View {
           NavigationStack {
               VStack {
                   searchBar
                   searchResultsList
               }
               .navigationTitle("æœç´¢äº§å“")
               .searchable(text: $viewModel.searchQuery)
           }
       }
   }
   ```

2. åˆ›å»º ProductSearchResultRow å­ç»„ä»¶
3. å®ç°æ— é™æ»šåŠ¨åŠ è½½
4. æ·»åŠ ç©ºçŠ¶æ€å’ŒåŠ è½½çŠ¶æ€

**éªŒæ”¶æ ‡å‡†**:
- [x] æœç´¢åŠŸèƒ½æ­£å¸¸ âœ…
- [x] ç»“æœåˆ—è¡¨æ˜¾ç¤ºæ­£ç¡® âœ…
- [x] åˆ†é¡µåŠ è½½æµç•… âœ…
- [x] ç©ºçŠ¶æ€å‹å¥½ âœ…
- [x] UI ç¾è§‚æ˜“ç”¨ âœ…

---

#### Task 5.3: åˆ›å»º ScannedProductDetailView
**ä¼˜å…ˆçº§**: ğŸŸ¡ Medium
**ä¼°æ—¶**: UI å®ç°
**ä¾èµ–**: Task 5.1

**å®ç°æ­¥éª¤**:
1. åˆ›å»º ScannedProductDetailView.swift
   ```swift
   struct ScannedProductDetailView: View {
       let product: ScannedProduct
       let onConfirm: (ScannedProduct, Int) -> Void  // äº§å“å’Œæ¯æ—¥ä»½æ•°
       @State private var servingsPerDay = 1

       var body: some View {
           ScrollView {
               VStack(spacing: 20) {
                   productHeader
                   nutrientsList
                   servingsSelector
                   confirmButton
               }
               .padding()
           }
       }
   }
   ```

2. æ˜¾ç¤ºäº§å“å›¾ç‰‡ï¼ˆAsyncImageï¼‰
3. æ˜¾ç¤ºè¯†åˆ«åˆ°çš„è¥å…»æˆåˆ†
4. å…è®¸ç”¨æˆ·è°ƒæ•´æ¯æ—¥ä»½æ•°

**éªŒæ”¶æ ‡å‡†**:
- [x] äº§å“ä¿¡æ¯æ˜¾ç¤ºå®Œæ•´ âœ…
- [x] è¥å…»æˆåˆ†åˆ—è¡¨æ¸…æ™° âœ…
- [x] ä»½æ•°é€‰æ‹©æ­£å¸¸ âœ…
- [x] ç¡®è®¤æ·»åŠ æµç¨‹é¡ºç•… âœ…

---

#### Task 5.4: åˆ›å»º ScanHistoryView
**ä¼˜å…ˆçº§**: ğŸŸ¡ Medium
**ä¼°æ—¶**: UI å®ç°
**ä¾èµ–**: Task 4.3

**å®ç°æ­¥éª¤**:
1. åˆ›å»º ScanHistoryView.swift
   ```swift
   struct ScanHistoryView: View {
       @State private var viewModel: ScanHistoryViewModel?
       let onHistorySelected: (ScanHistory) -> Void

       var body: some View {
           List {
               ForEach(viewModel.scanHistory) { item in
                   ScanHistoryRow(item: item)
               }
               .onDelete { ... }
           }
           .navigationTitle("æ‰«æå†å²")
           .toolbar {
               ToolbarItem(placement: .destructiveAction) {
                   Button("æ¸…ç©º") { ... }
               }
           }
       }
   }
   ```

2. åˆ›å»º ScanHistoryRow å­ç»„ä»¶
3. æ”¯æŒæ»‘åŠ¨åˆ é™¤

**éªŒæ”¶æ ‡å‡†**:
- [x] å†å²åˆ—è¡¨æ˜¾ç¤ºæ­£ç¡® âœ…
- [x] èƒ½åˆ é™¤å•æ¡è®°å½• âœ…
- [x] èƒ½æ¸…ç©ºå…¨éƒ¨å†å² âœ…
- [x] UI ç¾è§‚ âœ…

---

#### Task 5.5: æ›´æ–° SupplementFormView
**ä¼˜å…ˆçº§**: ğŸ”´ High
**ä¼°æ—¶**: UI å®ç°
**ä¾èµ–**: Task 5.1, Task 5.2

**å®ç°æ­¥éª¤**:
1. åœ¨ SupplementFormView æ·»åŠ æ‰«æ/æœç´¢å…¥å£
   ```swift
   Section("å¿«é€Ÿæ·»åŠ ") {
       Button {
           showingScanner = true
       } label: {
           Label("æ‰«ææ¡å½¢ç ", systemImage: "barcode.viewfinder")
       }

       Button {
           showingSearch = true
       } label: {
           Label("æœç´¢äº§å“", systemImage: "magnifyingglass")
       }
   }
   ```

2. æ·»åŠ  sheet å±•ç¤ºæ‰«æå™¨å’Œæœç´¢ç•Œé¢
3. å¤„ç†æ‰«æ/æœç´¢ç»“æœå¡«å……è¡¨å•

**éªŒæ”¶æ ‡å‡†**:
- [x] æ‰«æå…¥å£æ¸…æ™° âœ…
- [x] æœç´¢å…¥å£æ¸…æ™° âœ…
- [x] ç»“æœèƒ½æ­£ç¡®å¡«å……è¡¨å• âœ…
- [x] æµç¨‹é¡ºç•… âœ…

---

### Phase 6: æƒé™ä¸é…ç½®

#### Task 6.1: é…ç½®ç›¸æœºæƒé™
**ä¼˜å…ˆçº§**: ğŸ”´ High
**ä¼°æ—¶**: å¿«é€Ÿ
**ä¾èµ–**: æ— 

**å®ç°æ­¥éª¤**:
1. æ›´æ–° Info.plist
   ```xml
   <key>NSCameraUsageDescription</key>
   <string>éœ€è¦ç›¸æœºæƒé™ä»¥æ‰«æäº§å“æ¡å½¢ç ï¼Œå¿«é€Ÿæ·»åŠ è¡¥å‰‚äº§å“</string>
   ```

2. åˆ›å»ºæƒé™è¯´æ˜è§†å›¾
   ```swift
   struct CameraPermissionView: View {
       let onRequestPermission: () -> Void
       let onOpenSettings: () -> Void

       var body: some View {
           VStack(spacing: 20) {
               Image(systemName: "camera.fill")
                   .font(.system(size: 60))
               Text("éœ€è¦ç›¸æœºæƒé™")
                   .font(.title2)
               Text("æ‰«æäº§å“æ¡å½¢ç éœ€è¦ä½¿ç”¨ç›¸æœº")
                   .foregroundStyle(.secondary)
               // æŒ‰é’®...
           }
       }
   }
   ```

**éªŒæ”¶æ ‡å‡†**:
- [x] Info.plist é…ç½®è¯´æ˜å·²åˆ›å»º âœ…
- [x] æƒé™è¯´æ˜æ¸…æ™° âœ…
- [x] è·³è½¬è®¾ç½®åŠŸèƒ½æ­£å¸¸ âœ…

---

#### Task 6.2: æ›´æ–° ModelContainer é…ç½®
**ä¼˜å…ˆçº§**: ğŸ”´ High
**ä¼°æ—¶**: å¿«é€Ÿ
**ä¾èµ–**: Task 1.2

**å®ç°æ­¥éª¤**:
1. æ›´æ–° vitamin_calculatorApp.swift
   ```swift
   let schema = Schema([
       UserProfile.self,
       Supplement.self,
       IntakeRecord.self,
       ReminderSchedule.self,
       ComplianceRecord.self,
       ScanHistory.self  // æ–°å¢
   ])
   ```

**éªŒæ”¶æ ‡å‡†**:
- [x] ModelContainer åŒ…å«æ‰€æœ‰æ¨¡å‹ âœ…
- [x] åº”ç”¨å¯åŠ¨æ­£å¸¸ âœ…
- [x] æ•°æ®æŒä¹…åŒ–æ­£å¸¸ âœ…

---

### Phase 7: é›†æˆä¸ä¼˜åŒ–

#### Task 7.1: ç«¯åˆ°ç«¯æµ‹è¯•
**ä¼˜å…ˆçº§**: ğŸŸ¡ Medium
**ä¼°æ—¶**: TDD å¾ªç¯
**ä¾èµ–**: æ‰€æœ‰ Phase 5-6 ä»»åŠ¡

**æµ‹è¯•æ­¥éª¤**:
1. ç¼–å†™é›†æˆæµ‹è¯•
   - å®Œæ•´çš„æ‰«ææµç¨‹
   - å®Œæ•´çš„æœç´¢æµç¨‹
   - äº§å“æ·»åŠ æµç¨‹
   - å†å²è®°å½•æµç¨‹

2. æ‰‹åŠ¨æµ‹è¯•
   - åœ¨çœŸæœºæµ‹è¯•æ‰«æåŠŸèƒ½
   - æµ‹è¯•å„ç§æ¡å½¢ç ç±»å‹
   - æµ‹è¯•ç½‘ç»œé”™è¯¯åœºæ™¯
   - æµ‹è¯•æƒé™æµç¨‹

**éªŒæ”¶æ ‡å‡†**:
- [x] æ‰€æœ‰é›†æˆæµ‹è¯•é€šè¿‡ âœ… (11/11 integration tests passed)
- [ ] çœŸæœºæ‰«æåŠŸèƒ½æ­£å¸¸
- [x] é”™è¯¯å¤„ç†å®Œå–„ âœ…
- [x] ç”¨æˆ·ä½“éªŒæµç•… âœ…

---

#### Task 7.2: æ€§èƒ½ä¼˜åŒ–
**ä¼˜å…ˆçº§**: ğŸŸ¢ Low
**ä¼°æ—¶**: æŒ‰éœ€
**ä¾èµ–**: Task 7.1

**ä¼˜åŒ–é¡¹**:
1. ç›¸æœºé¢„è§ˆæ€§èƒ½ä¼˜åŒ–
2. å›¾ç‰‡å¼‚æ­¥åŠ è½½å’Œç¼“å­˜
3. æœç´¢å»æŠ–åŠ¨ä¼˜åŒ–
4. API è¯·æ±‚ç¼“å­˜ç­–ç•¥

**éªŒæ”¶æ ‡å‡†**:
- [x] ç›¸æœºé¢„è§ˆæµç•… âœ… (ä½¿ç”¨åå°çº¿ç¨‹ + æ‰«ædebounce)
- [x] å›¾ç‰‡åŠ è½½ä¸é˜»å¡ âœ… (ä½¿ç”¨SwiftUI AsyncImageå¼‚æ­¥åŠ è½½)
- [x] æœç´¢å“åº”åŠæ—¶ âœ… (æ·»åŠ 0.5ç§’å»æŠ–åŠ¨,é¿å…è¿‡å¤šAPIè°ƒç”¨)
- [x] æ— æ˜æ˜¾å†…å­˜æ³„æ¼ âœ… (æ­£ç¡®çš„å†…å­˜ç®¡ç†,Taskå–æ¶ˆ,åè®®ä½¿ç”¨)

---

#### Task 7.3: æ–‡æ¡£æ›´æ–°
**ä¼˜å…ˆçº§**: ğŸŸ¡ Medium
**ä¼°æ—¶**: å¿«é€Ÿ
**ä¾èµ–**: Sprint 5 æ‰€æœ‰ä»»åŠ¡

**æ–‡æ¡£é¡¹**:
1. æ›´æ–° CLAUDE.mdï¼ˆå¦‚éœ€è¦ï¼‰
2. æ·»åŠ ä»£ç æ³¨é‡Š
3. åˆ›å»º Sprint 5 å®ŒæˆæŠ¥å‘Š

**éªŒæ”¶æ ‡å‡†**:
- [x] ä»£ç æ³¨é‡Šå®Œæ•´ âœ… (æ‰€æœ‰ä»£ç åŒ…å«è¯¦ç»†æ–‡æ¡£æ³¨é‡Š)
- [x] Sprint 5 å®ŒæˆæŠ¥å‘Šå·²åˆ›å»º âœ… (SPRINT_5_COMPLETION_REPORT.md)
- [x] æ¶æ„æ–‡æ¡£å·²æ›´æ–° âœ… (SPRINT_5_TASKS.mdçŠ¶æ€å·²æ›´æ–°)

---

## âœ… Definition of Done

æ¯ä¸ªä»»åŠ¡å®Œæˆéœ€æ»¡è¶³ï¼š

### ä»£ç è´¨é‡
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] æµ‹è¯•è¦†ç›–ç‡ > 90% (Models/Repositories)
- [ ] æµ‹è¯•è¦†ç›–ç‡ > 85% (Services/API)
- [ ] æµ‹è¯•è¦†ç›–ç‡ > 70% (ViewModels)
- [ ] ä»£ç éµå¾ª Swift ç¼–ç è§„èŒƒ
- [ ] æ— ç¼–è¯‘è­¦å‘Š
- [ ] ä»£ç å·²é‡æ„ä¼˜åŒ–

### åŠŸèƒ½å®Œæ•´æ€§
- [ ] æ‰€æœ‰éªŒæ”¶æ ‡å‡†æ»¡è¶³
- [ ] ç”¨æˆ·æ•…äº‹å®Œæ•´å®ç°
- [ ] è¾¹ç•Œæƒ…å†µå¤„ç†å¦¥å½“
- [ ] é”™è¯¯å¤„ç†å®Œå–„
- [ ] ç›¸æœºæƒé™å¤„ç†ä¼˜é›…

### æ–‡æ¡£
- [ ] æ·»åŠ å¿…è¦çš„ä»£ç æ³¨é‡Š
- [ ] æ›´æ–°ç›¸å…³æ–‡æ¡£
- [ ] åˆ›å»ºå®ŒæˆæŠ¥å‘Š

---

## ğŸ“ TDD è¦æ±‚

### æµ‹è¯•ç»„ç»‡è§„èŒƒ

```swift
@Suite("BarcodeScannerService Tests")
struct BarcodeScannerServiceTests {

    @Suite("Permission Tests")
    struct PermissionTests {
        @Test("Should return correct permission status")
        func testPermissionStatus() { }
    }

    @Suite("Barcode Validation Tests")
    struct BarcodeValidationTests {
        @Test("Should validate EAN-13 barcode")
        func testEAN13Validation() { }
    }
}
```

### API æµ‹è¯•æ³¨æ„äº‹é¡¹

- ä½¿ç”¨ Protocol æŠ½è±¡ URLSession
- åˆ›å»º Mock å“åº”æ•°æ®
- æµ‹è¯•å„ç§ HTTP çŠ¶æ€ç 
- æµ‹è¯•ç½‘ç»œè¶…æ—¶åœºæ™¯

```swift
protocol URLSessionProtocol {
    func data(for request: URLRequest) async throws -> (Data, URLResponse)
}

extension URLSession: URLSessionProtocol { }

class MockURLSession: URLSessionProtocol {
    var mockData: Data?
    var mockResponse: URLResponse?
    var mockError: Error?

    func data(for request: URLRequest) async throws -> (Data, URLResponse) {
        if let error = mockError { throw error }
        return (mockData ?? Data(), mockResponse ?? URLResponse())
    }
}
```

---

## ğŸ“Š Sprint 5 è¿›åº¦è·Ÿè¸ª

### Phase 1: æ•°æ®æ¨¡å‹å±‚ âœ… COMPLETED
- [x] Task 1.1: ScannedProduct æ¨¡å‹ âœ… (38 tests passed)
- [x] Task 1.2: ScanHistory æ¨¡å‹ âœ… (28 tests passed)
- [x] Task 1.3: ProductSearchResult æ¨¡å‹ âœ… (34 tests passed)

### Phase 2: æ•°æ®è®¿é—®å±‚ âœ… COMPLETED
- [x] Task 2.1: ScanHistoryRepository âœ… (28 tests passed)
- [x] Task 2.2: OpenFoodFactsAPI å®¢æˆ·ç«¯ âœ… (22 tests passed)

### Phase 3: ä¸šåŠ¡é€»è¾‘å±‚ âœ… COMPLETED
- [x] Task 3.1: BarcodeScannerService âœ… (17 tests passed)
- [x] Task 3.2: ProductLookupService âœ… (12 tests passed)
- [x] Task 3.3: NutrientMappingService âœ… (21 tests passed)

### Phase 4: è§†å›¾æ¨¡å‹å±‚ âœ… COMPLETED
- [x] Task 4.1: BarcodeScannerViewModel âœ… (14 tests passed)
- [x] Task 4.2: ProductSearchViewModel âœ… (15 tests passed)
- [x] Task 4.3: ScanHistoryViewModel âœ… (12 tests passed)

### Phase 5: UI å±‚ âœ… COMPLETED
- [x] Task 5.1: BarcodeScannerView âœ…
- [x] Task 5.2: ProductSearchView âœ…
- [x] Task 5.3: ScannedProductDetailView âœ…
- [x] Task 5.4: ScanHistoryView âœ…
- [x] Task 5.5: æ›´æ–° SupplementFormView âœ…

### Phase 6: æƒé™ä¸é…ç½® âœ… COMPLETED
- [x] Task 6.1: é…ç½®ç›¸æœºæƒé™ âœ… (é…ç½®æ–‡æ¡£å·²åˆ›å»º: CAMERA_PERMISSION_SETUP.md)
- [x] Task 6.2: æ›´æ–° ModelContainer âœ… (å·²æ·»åŠ  ScanHistory)

### Phase 7: é›†æˆä¸ä¼˜åŒ– âœ… COMPLETED
- [x] Task 7.1: ç«¯åˆ°ç«¯æµ‹è¯• âœ… (11 integration tests passed)
- [x] Task 7.2: æ€§èƒ½ä¼˜åŒ– âœ…
- [x] Task 7.3: æ–‡æ¡£æ›´æ–° âœ…

---

## ğŸ¯ Sprint 5 æˆåŠŸæ ‡å‡†

- [ ] æ‰€æœ‰ç”¨æˆ·æ•…äº‹å®Œæˆ
- [ ] æ‰€æœ‰ä»»åŠ¡çš„ Definition of Done æ»¡è¶³
- [ ] æ€»æµ‹è¯•æ•° > 220ï¼ˆç´¯è®¡ï¼‰
- [ ] æµ‹è¯•é€šè¿‡ç‡ = 100%
- [ ] æ¡å½¢ç æ‰«æåŠŸèƒ½ç¨³å®šå¯ç”¨
- [ ] äº§å“æœç´¢åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] ä¸ Open Food Facts API é›†æˆæˆåŠŸ
- [ ] UI ç¾è§‚æ˜“ç”¨
- [ ] æ— é‡å¤§ Bug

---

## ğŸ“š å‚è€ƒèµ„æº

### æŠ€æœ¯æ ˆ
- Swift 6.0+
- SwiftUI
- SwiftData (iOS 17+)
- Swift Testing
- AVFoundation (ç›¸æœº/æ¡å½¢ç )
- VisionKit (å¯é€‰)

### API æ–‡æ¡£
- [Open Food Facts API](https://world.openfoodfacts.org/data)
- [Open Food Facts API v2](https://openfoodfacts.github.io/openfoodfacts-server/api/)

### Apple æ–‡æ¡£
- [AVCaptureMetadataOutput](https://developer.apple.com/documentation/avfoundation/avcapturemetadataoutput)
- [Requesting Authorization for Media Capture](https://developer.apple.com/documentation/avfoundation/capture_setup/requesting_authorization_for_media_capture_on_ios)

---

## ğŸ”„ Sprint 5 ä¹‹å

**Sprint 6 å»ºè®®æ–¹å‘**:
- ç”¨æˆ·é…ç½®å®Œå–„
- é¦–æ¬¡å¯åŠ¨å¼•å¯¼
- æ•°æ®å¯¼å‡º/å¯¼å…¥
- ä¸ªæ€§åŒ–æ¨èå€¼è°ƒæ•´

---

**Sprint 5 å‡†å¤‡å°±ç»ª**: âœ…
**å¼€å§‹æ—¥æœŸ**: TBD
**é¢„è®¡å®Œæˆæ—¥æœŸ**: TBD

---

## ğŸ“ é™„å½•

### A. Open Food Facts API å“åº”ç¤ºä¾‹

```json
{
  "code": "3017620422003",
  "product": {
    "product_name": "Nutella",
    "brands": "Ferrero",
    "image_url": "https://...",
    "serving_size": "15g",
    "nutriments": {
      "vitamin-a_100g": 0,
      "vitamin-c_100g": 0,
      "calcium_100g": 0.062,
      "iron_100g": 0.0024
    }
  },
  "status": 1
}
```

### B. æ¡å½¢ç æ ¼å¼å‚è€ƒ

| æ ¼å¼ | ä½æ•° | ç¤ºä¾‹ | å¸¸è§ç”¨é€” |
|------|------|------|----------|
| EAN-13 | 13 | 4006381333931 | æ¬§æ´²å•†å“ |
| EAN-8 | 8 | 96385074 | å°å‹å•†å“ |
| UPC-A | 12 | 012345678905 | åŒ—ç¾å•†å“ |
| Code 128 | å¯å˜ | ABC-123 | ç‰©æµ/å·¥ä¸š |

### C. è¥å…»ç´ åç§°æ˜ å°„è¡¨

| Open Food Facts | æœ¬åœ° NutrientType |
|-----------------|-------------------|
| vitamin-a | vitaminA |
| vitamin-d | vitaminD |
| vitamin-c | vitaminC |
| calcium | calcium |
| iron | iron |
| magnesium | magnesium |
| zinc | zinc |
