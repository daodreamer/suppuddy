# Sprint 4 ä»»åŠ¡æ¸…å• - æ™ºèƒ½æé†’ç³»ç»Ÿ

## ğŸ“‹ Sprint æ¦‚è§ˆ

**Sprint å‘¨æœŸ**: Week 7-8
**Sprint ç›®æ ‡**: å®ç°æ™ºèƒ½æé†’ç³»ç»Ÿï¼Œå¸®åŠ©ç”¨æˆ·æŒ‰æ—¶æœç”¨è¡¥å‰‚å¹¶è¿½è¸ªéµä»åº¦
**æ–¹æ³•è®º**: Test-Driven Development (TDD)
**å‰ç½®æ¡ä»¶**: Sprint 3 å·²å®Œæˆ âœ…

---

## ğŸ¯ ç”¨æˆ·æ•…äº‹ (User Stories)

### Story 1: åˆ›å»ºæœç”¨æé†’
**ä½œä¸º** ç”¨æˆ·
**æˆ‘æƒ³è¦** è®¾ç½®æ¯æ—¥æœç”¨è¡¥å‰‚çš„æé†’æ—¶é—´
**ä»¥ä¾¿** ä¸ä¼šå¿˜è®°æŒ‰æ—¶æœç”¨

**éªŒæ”¶æ ‡å‡†**:
- [ ] èƒ½ä¸ºæ¯ä¸ªè¡¥å‰‚è®¾ç½®ç‹¬ç«‹çš„æé†’æ—¶é—´
- [ ] æ”¯æŒè®¾ç½®å¤šä¸ªæé†’æ—¶é—´ï¼ˆæ—©/ä¸­/æ™šï¼‰
- [ ] æ”¯æŒé€‰æ‹©é‡å¤æ¨¡å¼ï¼ˆæ¯æ—¥/å·¥ä½œæ—¥/å‘¨æœ«/è‡ªå®šä¹‰ï¼‰
- [ ] æé†’è®¾ç½®èƒ½æŒä¹…åŒ–ä¿å­˜
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼ˆ>90% è¦†ç›–ç‡ï¼‰

### Story 2: æ¥æ”¶æœ¬åœ°é€šçŸ¥
**ä½œä¸º** ç”¨æˆ·
**æˆ‘æƒ³è¦** åœ¨è®¾å®šæ—¶é—´æ”¶åˆ°æ¨é€é€šçŸ¥
**ä»¥ä¾¿** åŠæ—¶æé†’æˆ‘æœç”¨è¡¥å‰‚

**éªŒæ”¶æ ‡å‡†**:
- [ ] åº”ç”¨èƒ½æ­£ç¡®è¯·æ±‚é€šçŸ¥æƒé™
- [ ] åœ¨è®¾å®šæ—¶é—´å‡†æ—¶å‘é€æœ¬åœ°é€šçŸ¥
- [ ] é€šçŸ¥æ˜¾ç¤ºè¡¥å‰‚åç§°å’Œæœç”¨ä¿¡æ¯
- [ ] æ”¯æŒé€šçŸ¥å£°éŸ³å’Œå¾½ç« 
- [ ] åº”ç”¨åå°/å…³é—­çŠ¶æ€ä¸‹é€šçŸ¥ä»èƒ½è§¦å‘
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼ˆ>85% è¦†ç›–ç‡ï¼‰

### Story 3: é€šçŸ¥äº¤äº’
**ä½œä¸º** ç”¨æˆ·
**æˆ‘æƒ³è¦** ç›´æ¥åœ¨é€šçŸ¥ä¸Šè¿›è¡Œæ“ä½œ
**ä»¥ä¾¿** å¿«é€Ÿæ ‡è®°æœç”¨çŠ¶æ€

**éªŒæ”¶æ ‡å‡†**:
- [ ] é€šçŸ¥æ”¯æŒ"å·²æœç”¨"å¿«æ·æ“ä½œ
- [ ] é€šçŸ¥æ”¯æŒ"ç¨åæé†’"æ“ä½œ
- [ ] é€šçŸ¥æ”¯æŒ"è·³è¿‡æœ¬æ¬¡"æ“ä½œ
- [ ] æ“ä½œåè‡ªåŠ¨æ›´æ–°æ‘„å…¥è®°å½•
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡

### Story 4: æé†’ç®¡ç†ç•Œé¢
**ä½œä¸º** ç”¨æˆ·
**æˆ‘æƒ³è¦** åœ¨åº”ç”¨å†…ç®¡ç†æ‰€æœ‰æé†’è®¾ç½®
**ä»¥ä¾¿** æ–¹ä¾¿åœ°æŸ¥çœ‹å’Œä¿®æ”¹æé†’

**éªŒæ”¶æ ‡å‡†**:
- [ ] æ˜¾ç¤ºæ‰€æœ‰å·²è®¾ç½®çš„æé†’åˆ—è¡¨
- [ ] èƒ½ç¼–è¾‘ç°æœ‰æé†’
- [ ] èƒ½åˆ é™¤æé†’
- [ ] èƒ½ä¸´æ—¶ç¦ç”¨/å¯ç”¨æé†’
- [ ] UI ç¾è§‚æ˜“ç”¨
- [ ] UI æµ‹è¯•é€šè¿‡

### Story 5: æœç”¨éµä»åº¦ç»Ÿè®¡
**ä½œä¸º** ç”¨æˆ·
**æˆ‘æƒ³è¦** æŸ¥çœ‹æˆ‘çš„æœç”¨éµä»åº¦ç»Ÿè®¡
**ä»¥ä¾¿** äº†è§£æˆ‘çš„æœç”¨ä¹ æƒ¯æ˜¯å¦è‰¯å¥½

**éªŒæ”¶æ ‡å‡†**:
- [ ] æ˜¾ç¤ºæ¯æ—¥/æ¯å‘¨æœç”¨å®Œæˆç‡
- [ ] æ˜¾ç¤ºè¿ç»­æœç”¨å¤©æ•°ï¼ˆstreakï¼‰
- [ ] æ˜¾ç¤ºæ¼æœæ¬¡æ•°ç»Ÿè®¡
- [ ] å¯è§†åŒ–å±•ç¤ºéµä»åº¦è¶‹åŠ¿
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡

---

## ğŸ“ è¯¦ç»†ä»»åŠ¡åˆ†è§£

### Phase 1: æ•°æ®æ¨¡å‹å±‚ (Models)

#### Task 1.1: åˆ›å»º ReminderSchedule æ¨¡å‹
**ä¼˜å…ˆçº§**: ğŸ”´ High
**ä¼°æ—¶**: TDD å¾ªç¯
**ä¾èµ–**: Sprint 3 å®Œæˆ

**TDD æ­¥éª¤**:
1. ç¼–å†™ ReminderScheduleTests.swift æµ‹è¯•æ–‡ä»¶
   - æµ‹è¯•åˆå§‹åŒ–
   - æµ‹è¯•å±æ€§è®¿é—®
   - æµ‹è¯• SwiftData æŒä¹…åŒ–
   - æµ‹è¯•ä¸ Supplement çš„å…³è”
   - æµ‹è¯•é‡å¤æ¨¡å¼é€»è¾‘
   - æµ‹è¯•ä¸‹æ¬¡æé†’æ—¶é—´è®¡ç®—

2. åˆ›å»º ReminderSchedule.swift å®ç°
   ```swift
   @Model
   final class ReminderSchedule {
       var supplement: Supplement?
       var supplementName: String  // å¿«ç…§ï¼Œé˜²æ­¢åˆ é™¤è¡¥å‰‚åä¸¢å¤±
       var time: Date  // æé†’æ—¶é—´ï¼ˆåªå…³å¿ƒæ—¶åˆ†ï¼‰
       var repeatMode: RepeatMode
       var customWeekdays: [Int]?  // è‡ªå®šä¹‰é‡å¤çš„æ˜ŸæœŸå‡  (1-7)
       var isEnabled: Bool
       var notificationIdentifier: String  // ç”¨äºç®¡ç†æœ¬åœ°é€šçŸ¥
       var createdAt: Date
       var updatedAt: Date
   }

   enum RepeatMode: String, Codable, CaseIterable {
       case daily = "æ¯æ—¥"
       case weekdays = "å·¥ä½œæ—¥"
       case weekends = "å‘¨æœ«"
       case custom = "è‡ªå®šä¹‰"
   }
   ```

3. é‡æ„ä¼˜åŒ–

**éªŒæ”¶æ ‡å‡†**:
- [ ] æ‰€æœ‰å­—æ®µç±»å‹æ­£ç¡®
- [ ] SwiftData @Model é…ç½®æ­£ç¡®
- [ ] æ”¯æŒä¸ Supplement çš„å…³è”
- [ ] RepeatMode æšä¸¾å®Œæ•´
- [ ] èƒ½è®¡ç®—ä¸‹æ¬¡æé†’æ—¶é—´
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡

---

#### Task 1.2: åˆ›å»º ComplianceRecord æ¨¡å‹
**ä¼˜å…ˆçº§**: ğŸ”´ High
**ä¼°æ—¶**: TDD å¾ªç¯
**ä¾èµ–**: Task 1.1

**TDD æ­¥éª¤**:
1. ç¼–å†™ ComplianceRecordTests.swift æµ‹è¯•æ–‡ä»¶
   - æµ‹è¯•è®°å½•æé†’å“åº”çŠ¶æ€
   - æµ‹è¯•ä¸ ReminderSchedule å…³è”
   - æµ‹è¯•ç»Ÿè®¡è®¡ç®—

2. åˆ›å»º ComplianceRecord.swift å®ç°
   ```swift
   @Model
   final class ComplianceRecord {
       var reminderSchedule: ReminderSchedule?
       var scheduledTime: Date  // è®¡åˆ’æé†’æ—¶é—´
       var responseTime: Date?  // å®é™…å“åº”æ—¶é—´
       var status: ComplianceStatus
       var intakeRecord: IntakeRecord?  // å…³è”çš„æ‘„å…¥è®°å½•
       var createdAt: Date
   }

   enum ComplianceStatus: String, Codable, CaseIterable {
       case pending = "å¾…å“åº”"
       case taken = "å·²æœç”¨"
       case skipped = "å·²è·³è¿‡"
       case snoozed = "å·²æ¨è¿Ÿ"
       case missed = "å·²æ¼æœ"
   }
   ```

3. é‡æ„ä¼˜åŒ–

**éªŒæ”¶æ ‡å‡†**:
- [ ] èƒ½æ­£ç¡®è®°å½•æé†’å“åº”çŠ¶æ€
- [ ] æ”¯æŒä¸ ReminderSchedule å…³è”
- [ ] æ”¯æŒä¸ IntakeRecord å…³è”
- [ ] ComplianceStatus æšä¸¾å®Œæ•´
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡

---

#### Task 1.3: åˆ›å»º ComplianceStatistics å€¼ç±»å‹
**ä¼˜å…ˆçº§**: ğŸŸ¡ Medium
**ä¼°æ—¶**: TDD å¾ªç¯
**ä¾èµ–**: Task 1.2

**TDD æ­¥éª¤**:
1. ç¼–å†™ ComplianceStatisticsTests.swift
   - æµ‹è¯•å®Œæˆç‡è®¡ç®—
   - æµ‹è¯•è¿ç»­å¤©æ•°è®¡ç®—
   - æµ‹è¯•å‘¨/æœˆç»Ÿè®¡

2. åˆ›å»º ComplianceStatistics.swift å®ç°
   ```swift
   struct ComplianceStatistics {
       let period: StatisticsPeriod
       let totalReminders: Int
       let completedCount: Int
       let skippedCount: Int
       let missedCount: Int
       let currentStreak: Int
       let longestStreak: Int

       var completionRate: Double {
           guard totalReminders > 0 else { return 0 }
           return Double(completedCount) / Double(totalReminders) * 100
       }

       static func calculate(
           from records: [ComplianceRecord],
           period: StatisticsPeriod
       ) -> ComplianceStatistics
   }

   enum StatisticsPeriod {
       case day(Date)
       case week(Date)
       case month(Date)
       case all
   }
   ```

3. é‡æ„ä¼˜åŒ–

**éªŒæ”¶æ ‡å‡†**:
- [ ] èƒ½æ­£ç¡®è®¡ç®—å®Œæˆç‡
- [ ] èƒ½æ­£ç¡®è®¡ç®—è¿ç»­å¤©æ•°
- [ ] èƒ½æŒ‰ä¸åŒå‘¨æœŸç»Ÿè®¡
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡

---

### Phase 2: æ•°æ®è®¿é—®å±‚ (Repositories)

#### Task 2.1: åˆ›å»º ReminderRepository
**ä¼˜å…ˆçº§**: ğŸ”´ High
**ä¼°æ—¶**: TDD å¾ªç¯
**ä¾èµ–**: Task 1.1

**TDD æ­¥éª¤**:
1. ç¼–å†™ ReminderRepositoryTests.swift
   ```swift
   @Suite("ReminderRepository Tests")
   struct ReminderRepositoryTests {
       @Suite("Save Tests")
       @Suite("Fetch Tests")
       @Suite("Update Tests")
       @Suite("Delete Tests")
       @Suite("Query Tests")
   }
   ```

2. å®ç° ReminderRepository.swift
   ```swift
   @MainActor
   final class ReminderRepository {
       func save(_ reminder: ReminderSchedule) async throws
       func update(_ reminder: ReminderSchedule) async throws
       func delete(_ reminder: ReminderSchedule) async throws
       func getAll() async throws -> [ReminderSchedule]
       func getEnabled() async throws -> [ReminderSchedule]
       func getBySupplement(_ supplement: Supplement) async throws -> [ReminderSchedule]
       func getByNotificationId(_ id: String) async throws -> ReminderSchedule?
   }
   ```

3. é‡æ„ä¼˜åŒ–

**éªŒæ”¶æ ‡å‡†**:
- [ ] å®Œæ•´ CRUD æ“ä½œ
- [ ] æŒ‰çŠ¶æ€æŸ¥è¯¢ï¼ˆå¯ç”¨/ç¦ç”¨ï¼‰
- [ ] æŒ‰è¡¥å‰‚æŸ¥è¯¢
- [ ] æŒ‰é€šçŸ¥IDæŸ¥è¯¢
- [ ] æµ‹è¯•è¦†ç›–ç‡ > 90%
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡

---

#### Task 2.2: åˆ›å»º ComplianceRepository
**ä¼˜å…ˆçº§**: ğŸ”´ High
**ä¼°æ—¶**: TDD å¾ªç¯
**ä¾èµ–**: Task 1.2

**TDD æ­¥éª¤**:
1. ç¼–å†™ ComplianceRepositoryTests.swift

2. å®ç° ComplianceRepository.swift
   ```swift
   @MainActor
   final class ComplianceRepository {
       func save(_ record: ComplianceRecord) async throws
       func update(_ record: ComplianceRecord) async throws
       func getByDateRange(from: Date, to: Date) async throws -> [ComplianceRecord]
       func getByReminder(_ reminder: ReminderSchedule) async throws -> [ComplianceRecord]
       func getPending() async throws -> [ComplianceRecord]
       func markAsMissed(before date: Date) async throws
   }
   ```

3. é‡æ„ä¼˜åŒ–

**éªŒæ”¶æ ‡å‡†**:
- [ ] å®Œæ•´ CRUD æ“ä½œ
- [ ] æŒ‰æ—¥æœŸèŒƒå›´æŸ¥è¯¢
- [ ] æŒ‰æé†’æŸ¥è¯¢
- [ ] æŸ¥è¯¢å¾…å“åº”è®°å½•
- [ ] æ‰¹é‡æ ‡è®°æ¼æœ
- [ ] æµ‹è¯•è¦†ç›–ç‡ > 90%
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡

---

### Phase 3: ä¸šåŠ¡é€»è¾‘å±‚ (Services)

#### Task 3.1: åˆ›å»º NotificationService
**ä¼˜å…ˆçº§**: ğŸ”´ High
**ä¼°æ—¶**: TDD å¾ªç¯
**ä¾èµ–**: Task 1.1

**TDD æ­¥éª¤**:
1. ç¼–å†™ NotificationServiceTests.swift
   - æµ‹è¯•é€šçŸ¥è°ƒåº¦é€»è¾‘
   - æµ‹è¯•é€šçŸ¥å–æ¶ˆé€»è¾‘
   - æµ‹è¯•é€šçŸ¥å†…å®¹ç”Ÿæˆ
   - æµ‹è¯•æƒé™çŠ¶æ€æ£€æŸ¥

2. å®ç° NotificationService.swift
   ```swift
   final class NotificationService {
       // æƒé™ç®¡ç†
       func requestAuthorization() async throws -> Bool
       func getAuthorizationStatus() async -> UNAuthorizationStatus

       // é€šçŸ¥è°ƒåº¦
       func scheduleReminder(_ reminder: ReminderSchedule) async throws
       func cancelReminder(_ reminder: ReminderSchedule) async
       func cancelAllReminders() async
       func rescheduleAllReminders(_ reminders: [ReminderSchedule]) async throws

       // é€šçŸ¥æ“ä½œå¤„ç†
       func handleNotificationResponse(
           _ response: UNNotificationResponse
       ) async -> NotificationAction

       // å¾½ç« ç®¡ç†
       func updateBadgeCount(_ count: Int) async
   }

   enum NotificationAction {
       case taken(reminderId: String)
       case snoozed(reminderId: String, minutes: Int)
       case skipped(reminderId: String)
       case opened(reminderId: String)
   }
   ```

3. é‡æ„ä¼˜åŒ–

**éªŒæ”¶æ ‡å‡†**:
- [ ] èƒ½è¯·æ±‚é€šçŸ¥æƒé™
- [ ] èƒ½è°ƒåº¦æœ¬åœ°é€šçŸ¥
- [ ] èƒ½å–æ¶ˆé€šçŸ¥
- [ ] èƒ½å¤„ç†é€šçŸ¥å“åº”
- [ ] æ”¯æŒé€šçŸ¥æ“ä½œæŒ‰é’®
- [ ] æµ‹è¯•è¦†ç›–ç‡ > 85%
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡

---

#### Task 3.2: åˆ›å»º ReminderService
**ä¼˜å…ˆçº§**: ğŸ”´ High
**ä¼°æ—¶**: TDD å¾ªç¯
**ä¾èµ–**: Task 3.1, Task 2.1

**TDD æ­¥éª¤**:
1. ç¼–å†™ ReminderServiceTests.swift
   - æµ‹è¯•åˆ›å»ºæé†’æµç¨‹
   - æµ‹è¯•æ›´æ–°æé†’æµç¨‹
   - æµ‹è¯•åˆ é™¤æé†’æµç¨‹
   - æµ‹è¯•æé†’å“åº”å¤„ç†

2. å®ç° ReminderService.swift
   ```swift
   final class ReminderService {
       func createReminder(
           for supplement: Supplement,
           time: Date,
           repeatMode: RepeatMode,
           customWeekdays: [Int]?
       ) async throws -> ReminderSchedule

       func updateReminder(_ reminder: ReminderSchedule) async throws

       func deleteReminder(_ reminder: ReminderSchedule) async throws

       func toggleReminder(_ reminder: ReminderSchedule) async throws

       func handleReminderResponse(
           reminderId: String,
           action: NotificationAction
       ) async throws

       func processSnooze(
           reminder: ReminderSchedule,
           minutes: Int
       ) async throws

       func checkAndMarkMissedReminders() async throws
   }
   ```

3. é‡æ„ä¼˜åŒ–

**éªŒæ”¶æ ‡å‡†**:
- [ ] èƒ½åˆ›å»º/æ›´æ–°/åˆ é™¤æé†’
- [ ] èƒ½å¯ç”¨/ç¦ç”¨æé†’
- [ ] èƒ½å¤„ç†æé†’å“åº”
- [ ] èƒ½å¤„ç†æ¨è¿Ÿæé†’
- [ ] èƒ½æ£€æŸ¥å¹¶æ ‡è®°æ¼æœ
- [ ] æµ‹è¯•è¦†ç›–ç‡ > 85%
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡

---

#### Task 3.3: åˆ›å»º ComplianceService
**ä¼˜å…ˆçº§**: ğŸŸ¡ Medium
**ä¼°æ—¶**: TDD å¾ªç¯
**ä¾èµ–**: Task 2.2, Task 1.3

**TDD æ­¥éª¤**:
1. ç¼–å†™ ComplianceServiceTests.swift
   - æµ‹è¯•ç»Ÿè®¡è®¡ç®—
   - æµ‹è¯•è¿ç»­å¤©æ•°è®¡ç®—
   - æµ‹è¯•è¶‹åŠ¿æ•°æ®ç”Ÿæˆ

2. å®ç° ComplianceService.swift
   ```swift
   final class ComplianceService {
       func getStatistics(
           for period: StatisticsPeriod
       ) async throws -> ComplianceStatistics

       func getStatisticsBySupplement(
           _ supplement: Supplement,
           period: StatisticsPeriod
       ) async throws -> ComplianceStatistics

       func getTrendData(
           days: Int
       ) async throws -> [DailyComplianceData]

       func calculateStreak() async throws -> Int
   }

   struct DailyComplianceData {
       let date: Date
       let completionRate: Double
       let completedCount: Int
       let totalCount: Int
   }
   ```

3. é‡æ„ä¼˜åŒ–

**éªŒæ”¶æ ‡å‡†**:
- [ ] èƒ½è®¡ç®—å„å‘¨æœŸç»Ÿè®¡
- [ ] èƒ½æŒ‰è¡¥å‰‚ç»Ÿè®¡
- [ ] èƒ½ç”Ÿæˆè¶‹åŠ¿æ•°æ®
- [ ] èƒ½è®¡ç®—è¿ç»­å¤©æ•°
- [ ] æµ‹è¯•è¦†ç›–ç‡ > 85%
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡

---

### Phase 4: è§†å›¾æ¨¡å‹å±‚ (ViewModels)

#### Task 4.1: åˆ›å»º ReminderListViewModel
**ä¼˜å…ˆçº§**: ğŸ”´ High
**ä¼°æ—¶**: TDD å¾ªç¯
**ä¾èµ–**: Task 3.2

**TDD æ­¥éª¤**:
1. ç¼–å†™ ReminderListViewModelTests.swift
   - æµ‹è¯•åŠ è½½æé†’åˆ—è¡¨
   - æµ‹è¯•åˆ‡æ¢æé†’çŠ¶æ€
   - æµ‹è¯•åˆ é™¤æé†’

2. å®ç° ReminderListViewModel.swift
   ```swift
   @MainActor
   @Observable
   final class ReminderListViewModel {
       var reminders: [ReminderSchedule] = []
       var isLoading: Bool = false
       var errorMessage: String?
       var notificationPermissionStatus: UNAuthorizationStatus = .notDetermined

       func loadReminders() async
       func toggleReminder(_ reminder: ReminderSchedule) async
       func deleteReminder(_ reminder: ReminderSchedule) async
       func checkNotificationPermission() async
       func requestNotificationPermission() async
   }
   ```

3. é‡æ„ä¼˜åŒ–

**éªŒæ”¶æ ‡å‡†**:
- [ ] ä½¿ç”¨ @Observable å®
- [ ] èƒ½åŠ è½½æé†’åˆ—è¡¨
- [ ] èƒ½åˆ‡æ¢æé†’çŠ¶æ€
- [ ] èƒ½æ£€æŸ¥é€šçŸ¥æƒé™
- [ ] æµ‹è¯•è¦†ç›–ç‡ > 70%
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡

---

#### Task 4.2: åˆ›å»º ReminderFormViewModel
**ä¼˜å…ˆçº§**: ğŸ”´ High
**ä¼°æ—¶**: TDD å¾ªç¯
**ä¾èµ–**: Task 3.2

**TDD æ­¥éª¤**:
1. ç¼–å†™ ReminderFormViewModelTests.swift
   - æµ‹è¯•è¡¨å•éªŒè¯
   - æµ‹è¯•åˆ›å»ºæé†’
   - æµ‹è¯•ç¼–è¾‘æé†’

2. å®ç° ReminderFormViewModel.swift
   ```swift
   @MainActor
   @Observable
   final class ReminderFormViewModel {
       var selectedSupplement: Supplement?
       var reminderTime: Date = Date()
       var repeatMode: RepeatMode = .daily
       var selectedWeekdays: Set<Int> = []
       var isEnabled: Bool = true
       var isLoading: Bool = false
       var errorMessage: String?

       var isFormValid: Bool { ... }

       func save() async throws
       func loadForEditing(_ reminder: ReminderSchedule)
   }
   ```

3. é‡æ„ä¼˜åŒ–

**éªŒæ”¶æ ‡å‡†**:
- [ ] è¡¨å•éªŒè¯å®Œå–„
- [ ] æ”¯æŒæ·»åŠ /ç¼–è¾‘æ¨¡å¼
- [ ] èƒ½ä¿å­˜æé†’
- [ ] æµ‹è¯•è¦†ç›–ç‡ > 70%
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡

---

#### Task 4.3: åˆ›å»º ComplianceViewModel
**ä¼˜å…ˆçº§**: ğŸŸ¡ Medium
**ä¼°æ—¶**: TDD å¾ªç¯
**ä¾èµ–**: Task 3.3

**TDD æ­¥éª¤**:
1. ç¼–å†™ ComplianceViewModelTests.swift
   - æµ‹è¯•åŠ è½½ç»Ÿè®¡æ•°æ®
   - æµ‹è¯•åˆ‡æ¢å‘¨æœŸ

2. å®ç° ComplianceViewModel.swift
   ```swift
   @MainActor
   @Observable
   final class ComplianceViewModel {
       var statistics: ComplianceStatistics?
       var trendData: [DailyComplianceData] = []
       var selectedPeriod: StatisticsPeriod = .week(Date())
       var isLoading: Bool = false
       var errorMessage: String?

       func loadStatistics() async
       func changePeriod(_ period: StatisticsPeriod) async
       func loadTrendData(days: Int) async
   }
   ```

3. é‡æ„ä¼˜åŒ–

**éªŒæ”¶æ ‡å‡†**:
- [ ] èƒ½åŠ è½½ç»Ÿè®¡æ•°æ®
- [ ] èƒ½åˆ‡æ¢ç»Ÿè®¡å‘¨æœŸ
- [ ] èƒ½åŠ è½½è¶‹åŠ¿æ•°æ®
- [ ] æµ‹è¯•è¦†ç›–ç‡ > 70%
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡

---

### Phase 5: UI å±‚ (Views)

#### Task 5.1: åˆ›å»º ReminderListView
**ä¼˜å…ˆçº§**: ğŸ”´ High
**ä¼°æ—¶**: UI å®ç°
**ä¾èµ–**: Task 4.1

**å®ç°æ­¥éª¤**:
1. åˆ›å»º ReminderListView.swift
   ```swift
   struct ReminderListView: View {
       @Environment(\.modelContext) private var modelContext
       @State private var viewModel: ReminderListViewModel?
       @State private var showingAddReminder = false

       var body: some View {
           NavigationStack {
               List {
                   permissionStatusSection
                   remindersSection
               }
               .navigationTitle("æœç”¨æé†’")
               .toolbar {
                   ToolbarItem(placement: .primaryAction) {
                       Button("æ·»åŠ ") { showingAddReminder = true }
                   }
               }
               .sheet(isPresented: $showingAddReminder) {
                   ReminderFormView(mode: .add)
               }
           }
       }
   }
   ```

2. åˆ›å»º ReminderRowView å­ç»„ä»¶
3. æ·»åŠ æƒé™çŠ¶æ€æç¤ºåŒºåŸŸ
4. æ”¯æŒæ»‘åŠ¨åˆ é™¤å’Œåˆ‡æ¢

**éªŒæ”¶æ ‡å‡†**:
- [ ] åˆ—è¡¨æ­£å¸¸æ˜¾ç¤º
- [ ] æƒé™çŠ¶æ€æç¤ºæ¸…æ™°
- [ ] åˆ‡æ¢å¼€å…³å·¥ä½œæ­£å¸¸
- [ ] æ·»åŠ /ç¼–è¾‘åŠŸèƒ½æ­£å¸¸
- [ ] UI ç¾è§‚æ˜“ç”¨

---

#### Task 5.2: åˆ›å»º ReminderFormView
**ä¼˜å…ˆçº§**: ğŸ”´ High
**ä¼°æ—¶**: UI å®ç°
**ä¾èµ–**: Task 4.2

**å®ç°æ­¥éª¤**:
1. åˆ›å»º ReminderFormView.swift
   ```swift
   struct ReminderFormView: View {
       enum Mode { case add, edit(ReminderSchedule) }
       let mode: Mode

       @Environment(\.modelContext) private var modelContext
       @Environment(\.dismiss) private var dismiss
       @State private var viewModel: ReminderFormViewModel?

       var body: some View {
           NavigationStack {
               Form {
                   supplementSelectionSection
                   timeSelectionSection
                   repeatModeSection
                   weekdaySelectionSection  // ä»…åœ¨ custom æ¨¡å¼æ˜¾ç¤º
               }
               .navigationTitle(mode.isAdd ? "æ·»åŠ æé†’" : "ç¼–è¾‘æé†’")
               .toolbar {
                   ToolbarItem(placement: .cancellationAction) {
                       Button("å–æ¶ˆ") { dismiss() }
                   }
                   ToolbarItem(placement: .confirmationAction) {
                       Button("ä¿å­˜") { ... }
                   }
               }
           }
       }
   }
   ```

2. åˆ›å»ºæ—¶é—´é€‰æ‹©å™¨
3. åˆ›å»ºé‡å¤æ¨¡å¼é€‰æ‹©å™¨
4. åˆ›å»ºæ˜ŸæœŸé€‰æ‹©å™¨ï¼ˆè‡ªå®šä¹‰æ¨¡å¼ï¼‰

**éªŒæ”¶æ ‡å‡†**:
- [ ] è¡¥å‰‚é€‰æ‹©æ­£å¸¸
- [ ] æ—¶é—´é€‰æ‹©æ­£å¸¸
- [ ] é‡å¤æ¨¡å¼åˆ‡æ¢æ­£å¸¸
- [ ] è‡ªå®šä¹‰æ˜ŸæœŸé€‰æ‹©æ­£å¸¸
- [ ] è¡¨å•éªŒè¯å·¥ä½œ
- [ ] ä¿å­˜åŠŸèƒ½æ­£å¸¸

---

#### Task 5.3: åˆ›å»º ComplianceView
**ä¼˜å…ˆçº§**: ğŸŸ¡ Medium
**ä¼°æ—¶**: UI å®ç°
**ä¾èµ–**: Task 4.3

**å®ç°æ­¥éª¤**:
1. åˆ›å»º ComplianceView.swift
   ```swift
   struct ComplianceView: View {
       @Environment(\.modelContext) private var modelContext
       @State private var viewModel: ComplianceViewModel?

       var body: some View {
           ScrollView {
               VStack(spacing: 20) {
                   periodSelector
                   statisticsCard
                   streakCard
                   trendChart
               }
               .padding()
           }
           .navigationTitle("æœç”¨ç»Ÿè®¡")
       }
   }
   ```

2. åˆ›å»ºç»Ÿè®¡å¡ç‰‡ç»„ä»¶
3. åˆ›å»ºè¿ç»­å¤©æ•°å±•ç¤º
4. ä½¿ç”¨ Swift Charts åˆ›å»ºè¶‹åŠ¿å›¾

**éªŒæ”¶æ ‡å‡†**:
- [ ] ç»Ÿè®¡æ•°æ®æ­£ç¡®æ˜¾ç¤º
- [ ] å‘¨æœŸåˆ‡æ¢å·¥ä½œæ­£å¸¸
- [ ] è¿ç»­å¤©æ•°å±•ç¤ºç¾è§‚
- [ ] è¶‹åŠ¿å›¾è¡¨äº¤äº’å‹å¥½
- [ ] UI ç¾è§‚æ˜“ç”¨

---

#### Task 5.4: æ›´æ–°å¯¼èˆªç»“æ„
**ä¼˜å…ˆçº§**: ğŸ”´ High
**ä¼°æ—¶**: å¿«é€Ÿ
**ä¾èµ–**: Task 5.1

**å®ç°æ­¥éª¤**:
1. æ›´æ–° ContentView TabView
   ```swift
   TabView {
       DashboardView()
           .tabItem { Label("é¦–é¡µ", systemImage: "house.fill") }

       IntakeRecordView()
           .tabItem { Label("è®°å½•", systemImage: "plus.circle.fill") }

       SupplementListView()
           .tabItem { Label("è¡¥å‰‚", systemImage: "pills.fill") }

       ReminderListView()  // æ–°å¢
           .tabItem { Label("æé†’", systemImage: "bell.fill") }

       ProfileView()
           .tabItem { Label("æˆ‘çš„", systemImage: "person.fill") }
   }
   ```

2. åœ¨ ProfileView æˆ– DashboardView æ·»åŠ éµä»åº¦ç»Ÿè®¡å…¥å£
3. ç¡®ä¿å¯¼èˆªæµç¨‹é¡ºç•…

**éªŒæ”¶æ ‡å‡†**:
- [ ] TabView æ­£ç¡®æ˜¾ç¤ºæé†’æ ‡ç­¾
- [ ] å„é¡µé¢å¯¼èˆªæ­£å¸¸
- [ ] éµä»åº¦ç»Ÿè®¡å…¥å£æ¸…æ™°

---

### Phase 6: é€šçŸ¥é›†æˆ

#### Task 6.1: é…ç½® UNUserNotificationCenter
**ä¼˜å…ˆçº§**: ğŸ”´ High
**ä¼°æ—¶**: å¿«é€Ÿ
**ä¾èµ–**: Task 3.1

**å®ç°æ­¥éª¤**:
1. åœ¨ AppDelegate æˆ– App å…¥å£é…ç½®é€šçŸ¥ä¸­å¿ƒ
   ```swift
   @main
   struct vitamin_calculatorApp: App {
       @UIApplicationDelegateAdaptor(AppDelegate.self) var appDelegate

       // ...
   }

   class AppDelegate: NSObject, UIApplicationDelegate, UNUserNotificationCenterDelegate {
       func application(
           _ application: UIApplication,
           didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?
       ) -> Bool {
           UNUserNotificationCenter.current().delegate = self
           return true
       }

       // å¤„ç†å‰å°é€šçŸ¥
       func userNotificationCenter(
           _ center: UNUserNotificationCenter,
           willPresent notification: UNNotification
       ) async -> UNNotificationPresentationOptions {
           return [.banner, .sound, .badge]
       }

       // å¤„ç†é€šçŸ¥å“åº”
       func userNotificationCenter(
           _ center: UNUserNotificationCenter,
           didReceive response: UNNotificationResponse
       ) async {
           // å¤„ç†ç”¨æˆ·å“åº”
       }
   }
   ```

2. æ³¨å†Œé€šçŸ¥ç±»åˆ«å’Œæ“ä½œ
   ```swift
   func registerNotificationCategories() {
       let takenAction = UNNotificationAction(
           identifier: "TAKEN",
           title: "å·²æœç”¨",
           options: .foreground
       )
       let snoozeAction = UNNotificationAction(
           identifier: "SNOOZE",
           title: "ç¨åæé†’",
           options: []
       )
       let skipAction = UNNotificationAction(
           identifier: "SKIP",
           title: "è·³è¿‡",
           options: .destructive
       )

       let category = UNNotificationCategory(
           identifier: "SUPPLEMENT_REMINDER",
           actions: [takenAction, snoozeAction, skipAction],
           intentIdentifiers: [],
           options: []
       )

       UNUserNotificationCenter.current().setNotificationCategories([category])
   }
   ```

**éªŒæ”¶æ ‡å‡†**:
- [ ] é€šçŸ¥ä¸­å¿ƒæ­£ç¡®é…ç½®
- [ ] é€šçŸ¥ç±»åˆ«å·²æ³¨å†Œ
- [ ] é€šçŸ¥æ“ä½œæŒ‰é’®æ­£å¸¸å·¥ä½œ
- [ ] å‰å°é€šçŸ¥æ­£å¸¸æ˜¾ç¤º

---

#### Task 6.2: æ›´æ–° ModelContainer é…ç½®
**ä¼˜å…ˆçº§**: ğŸ”´ High
**ä¼°æ—¶**: å¿«é€Ÿ
**ä¾èµ–**: Task 1.1, Task 1.2

**å®ç°æ­¥éª¤**:
1. æ›´æ–° vitamin_calculatorApp.swift
   ```swift
   let schema = Schema([
       UserProfile.self,
       Supplement.self,
       IntakeRecord.self,
       ReminderSchedule.self,  // æ–°å¢
       ComplianceRecord.self   // æ–°å¢
   ])
   ```

**éªŒæ”¶æ ‡å‡†**:
- [ ] ModelContainer åŒ…å«æ‰€æœ‰æ¨¡å‹
- [ ] åº”ç”¨å¯åŠ¨æ­£å¸¸
- [ ] æ•°æ®æŒä¹…åŒ–æ­£å¸¸

---

### Phase 7: é›†æˆä¸ä¼˜åŒ–

#### Task 7.1: ç«¯åˆ°ç«¯æµ‹è¯•
**ä¼˜å…ˆçº§**: ğŸŸ¡ Medium
**ä¼°æ—¶**: TDD å¾ªç¯
**ä¾èµ–**: æ‰€æœ‰ Phase 5-6 ä»»åŠ¡

**æµ‹è¯•æ­¥éª¤**:
1. ç¼–å†™é›†æˆæµ‹è¯•
   - å®Œæ•´çš„åˆ›å»ºæé†’æµç¨‹
   - é€šçŸ¥è§¦å‘å’Œå“åº”æµç¨‹
   - éµä»åº¦ç»Ÿè®¡æµç¨‹
   - æé†’ç¼–è¾‘å’Œåˆ é™¤æµç¨‹

2. æ‰‹åŠ¨æµ‹è¯•
   - åœ¨æ¨¡æ‹Ÿå™¨æµ‹è¯•æ‰€æœ‰åŠŸèƒ½
   - æµ‹è¯•é€šçŸ¥æƒé™æµç¨‹
   - æµ‹è¯•åå°é€šçŸ¥è§¦å‘
   - æµ‹è¯•å„ç§è¾¹ç•Œæƒ…å†µ

**éªŒæ”¶æ ‡å‡†**:
- [ ] æ‰€æœ‰é›†æˆæµ‹è¯•é€šè¿‡
- [ ] æ‰‹åŠ¨æµ‹è¯•æ— é‡å¤§é—®é¢˜
- [ ] é€šçŸ¥åŠŸèƒ½å¯é 
- [ ] ç”¨æˆ·ä½“éªŒæµç•…

---

#### Task 7.2: æ€§èƒ½ä¼˜åŒ–
**ä¼˜å…ˆçº§**: ğŸŸ¢ Low
**ä¼°æ—¶**: æŒ‰éœ€
**ä¾èµ–**: Task 7.1

**ä¼˜åŒ–é¡¹**:
1. é€šçŸ¥è°ƒåº¦ä¼˜åŒ–ï¼ˆæ‰¹é‡å¤„ç†ï¼‰
2. ç»Ÿè®¡è®¡ç®—ç¼“å­˜
3. æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
4. å†…å­˜ä½¿ç”¨ä¼˜åŒ–

**éªŒæ”¶æ ‡å‡†**:
- [ ] é€šçŸ¥è°ƒåº¦å¿«é€Ÿ
- [ ] ç»Ÿè®¡åŠ è½½æµç•…
- [ ] æ— æ˜æ˜¾å†…å­˜æ³„æ¼

---

#### Task 7.3: æ–‡æ¡£æ›´æ–°
**ä¼˜å…ˆçº§**: ğŸŸ¡ Medium
**ä¼°æ—¶**: å¿«é€Ÿ
**ä¾èµ–**: Sprint 4 æ‰€æœ‰ä»»åŠ¡

**æ–‡æ¡£é¡¹**:
1. æ›´æ–° CLAUDE.mdï¼ˆå¦‚éœ€è¦ï¼‰
2. æ·»åŠ ä»£ç æ³¨é‡Š
3. åˆ›å»º Sprint 4 å®ŒæˆæŠ¥å‘Š

**éªŒæ”¶æ ‡å‡†**:
- [ ] ä»£ç æ³¨é‡Šå®Œæ•´
- [ ] Sprint 4 å®ŒæˆæŠ¥å‘Šå·²åˆ›å»º
- [ ] æ¶æ„æ–‡æ¡£å·²æ›´æ–°

---

## âœ… Definition of Done

æ¯ä¸ªä»»åŠ¡å®Œæˆéœ€æ»¡è¶³ï¼š

### ä»£ç è´¨é‡
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] æµ‹è¯•è¦†ç›–ç‡ > 90% (Models/Repositories)
- [ ] æµ‹è¯•è¦†ç›–ç‡ > 85% (Services)
- [ ] æµ‹è¯•è¦†ç›–ç‡ > 70% (ViewModels)
- [ ] ä»£ç éµå¾ª Swift ç¼–ç è§„èŒƒ
- [ ] æ— ç¼–è¯‘è­¦å‘Šï¼ˆActor isolation è­¦å‘Šé™¤å¤–ï¼‰
- [ ] ä»£ç å·²é‡æ„ä¼˜åŒ–

### åŠŸèƒ½å®Œæ•´æ€§
- [ ] æ‰€æœ‰éªŒæ”¶æ ‡å‡†æ»¡è¶³
- [ ] ç”¨æˆ·æ•…äº‹å®Œæ•´å®ç°
- [ ] è¾¹ç•Œæƒ…å†µå¤„ç†å¦¥å½“
- [ ] é”™è¯¯å¤„ç†å®Œå–„
- [ ] é€šçŸ¥åŠŸèƒ½ç¨³å®šå¯é 

### æ–‡æ¡£
- [ ] æ·»åŠ å¿…è¦çš„ä»£ç æ³¨é‡Š
- [ ] æ›´æ–°ç›¸å…³æ–‡æ¡£
- [ ] åˆ›å»ºå®ŒæˆæŠ¥å‘Š

---

## ğŸ“ TDD è¦æ±‚

### ä¸¥æ ¼éµå¾ª Red-Green-Refactor å¾ªç¯

1. **ğŸ”´ RED - ç¼–å†™å¤±è´¥çš„æµ‹è¯•**
   - å…ˆå†™æµ‹è¯•ï¼Œæ˜ç¡®éœ€æ±‚
   - æµ‹è¯•åº”è¯¥å¤±è´¥ï¼ˆå› ä¸ºåŠŸèƒ½è¿˜æ²¡å®ç°ï¼‰
   - æµ‹è¯•å‘½åæ¸…æ™°æè¿°è¡Œä¸º

2. **ğŸŸ¢ GREEN - ç¼–å†™æœ€å°ä»£ç ä½¿æµ‹è¯•é€šè¿‡**
   - åªå†™è®©æµ‹è¯•é€šè¿‡çš„ä»£ç 
   - ä¸è¿‡åº¦è®¾è®¡
   - å¿«é€Ÿè¿­ä»£

3. **ğŸ”µ REFACTOR - é‡æ„ä¼˜åŒ–**
   - æ”¹å–„ä»£ç ç»“æ„
   - æ¶ˆé™¤é‡å¤
   - ä¿æŒæµ‹è¯•é€šè¿‡

### æµ‹è¯•ç»„ç»‡è§„èŒƒ

ä½¿ç”¨ Swift Testing æ¡†æ¶çš„ @Suite ç»„ç»‡æµ‹è¯•ï¼š

```swift
@Suite("ReminderSchedule Tests")
struct ReminderScheduleTests {

    @Suite("Initialization Tests")
    struct InitializationTests {
        @Test("Should initialize with valid data")
        func testValidInitialization() { }
    }

    @Suite("Next Reminder Calculation Tests")
    struct NextReminderTests {
        @Test("Should calculate next daily reminder")
        func testDailyNextReminder() { }
    }
}
```

### é€šçŸ¥æµ‹è¯•æ³¨æ„äº‹é¡¹

ç”±äºæœ¬åœ°é€šçŸ¥éœ€è¦çœŸæœºæµ‹è¯•ï¼Œå»ºè®®ï¼š
- ä½¿ç”¨ Protocol æŠ½è±¡ UNUserNotificationCenter
- åœ¨å•å…ƒæµ‹è¯•ä¸­ä½¿ç”¨ Mock
- åœ¨ UI æµ‹è¯•ä¸­æµ‹è¯•æƒé™è¯·æ±‚æµç¨‹
- æ‰‹åŠ¨åœ¨çœŸæœºä¸Šæµ‹è¯•é€šçŸ¥è§¦å‘

```swift
protocol NotificationCenterProtocol {
    func requestAuthorization(options: UNAuthorizationOptions) async throws -> Bool
    func add(_ request: UNNotificationRequest) async throws
    func removePendingNotificationRequests(withIdentifiers: [String])
}

extension UNUserNotificationCenter: NotificationCenterProtocol { }
```

### æµ‹è¯•è¦†ç›–è¦æ±‚

- Models: > 90%
- Repositories: > 90%
- Services: > 85%
- ViewModels: > 70%
- Views: å¯é€‰ï¼ˆUI æµ‹è¯•ï¼‰

---

## ğŸ“Š Sprint 4 è¿›åº¦è·Ÿè¸ª

### Phase 1: æ•°æ®æ¨¡å‹å±‚
- [ ] Task 1.1: ReminderSchedule æ¨¡å‹
- [ ] Task 1.2: ComplianceRecord æ¨¡å‹
- [ ] Task 1.3: ComplianceStatistics å€¼ç±»å‹

### Phase 2: æ•°æ®è®¿é—®å±‚
- [ ] Task 2.1: ReminderRepository
- [ ] Task 2.2: ComplianceRepository

### Phase 3: ä¸šåŠ¡é€»è¾‘å±‚
- [ ] Task 3.1: NotificationService
- [ ] Task 3.2: ReminderService
- [ ] Task 3.3: ComplianceService

### Phase 4: è§†å›¾æ¨¡å‹å±‚
- [ ] Task 4.1: ReminderListViewModel
- [ ] Task 4.2: ReminderFormViewModel
- [ ] Task 4.3: ComplianceViewModel

### Phase 5: UI å±‚
- [ ] Task 5.1: ReminderListView
- [ ] Task 5.2: ReminderFormView
- [ ] Task 5.3: ComplianceView
- [ ] Task 5.4: æ›´æ–°å¯¼èˆªç»“æ„

### Phase 6: é€šçŸ¥é›†æˆ
- [ ] Task 6.1: é…ç½® UNUserNotificationCenter
- [ ] Task 6.2: æ›´æ–° ModelContainer

### Phase 7: é›†æˆä¸ä¼˜åŒ–
- [ ] Task 7.1: ç«¯åˆ°ç«¯æµ‹è¯•
- [ ] Task 7.2: æ€§èƒ½ä¼˜åŒ–
- [ ] Task 7.3: æ–‡æ¡£æ›´æ–°

---

## ğŸ¯ Sprint 4 æˆåŠŸæ ‡å‡†

- [ ] æ‰€æœ‰ç”¨æˆ·æ•…äº‹å®Œæˆ
- [ ] æ‰€æœ‰ä»»åŠ¡çš„ Definition of Done æ»¡è¶³
- [ ] æ€»æµ‹è¯•æ•° > 180ï¼ˆç´¯è®¡ï¼‰
- [ ] æµ‹è¯•é€šè¿‡ç‡ = 100%
- [ ] ç”¨æˆ·èƒ½åˆ›å»ºå’Œç®¡ç†æœç”¨æé†’
- [ ] æœ¬åœ°é€šçŸ¥æ­£å¸¸å·¥ä½œ
- [ ] éµä»åº¦ç»Ÿè®¡åŠŸèƒ½æ­£å¸¸
- [ ] UI ç¾è§‚æ˜“ç”¨
- [ ] æ— é‡å¤§ Bug

---

## ğŸ“š å‚è€ƒèµ„æº

### æŠ€æœ¯æ ˆ
- Swift 6.0+
- SwiftUI
- SwiftData (iOS 17+)
- Swift Testing
- UserNotifications framework
- Swift Charts

### Apple æ–‡æ¡£
- [UNUserNotificationCenter](https://developer.apple.com/documentation/usernotifications/unusernotificationcenter)
- [Scheduling Notifications](https://developer.apple.com/documentation/usernotifications/scheduling_a_notification_locally_from_your_app)
- [Handling Notifications](https://developer.apple.com/documentation/usernotifications/handling_notifications_and_notification-related_actions)

### è®¾è®¡å‚è€ƒ
- Apple Health App æé†’åŠŸèƒ½
- Streaks App
- Apple Human Interface Guidelines - Notifications

---

## ğŸ”„ Sprint 4 ä¹‹å

**Sprint 5 å»ºè®®æ–¹å‘**:
- æ¡å½¢ç æ‰«æï¼ˆVisionKitï¼‰
- äº§å“æ•°æ®åº“æœç´¢ï¼ˆOpen Food Facts APIï¼‰
- ç›¸æœºæƒé™å¤„ç†
- äº§å“è¯†åˆ«å’Œè‡ªåŠ¨å¡«å……

---

**Sprint 4 å‡†å¤‡å°±ç»ª**: âœ…
**å¼€å§‹æ—¥æœŸ**: TBD
**é¢„è®¡å®Œæˆæ—¥æœŸ**: TBD

---

## ğŸ“ é™„å½•

### A. æ•°æ®æ¨¡å‹å…³ç³»å›¾

```
UserProfile
    |
    v
Supplement â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    |                        |
    v                        v
IntakeRecord          ReminderSchedule
    ^                        |
    |                        v
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ComplianceRecord
```

### B. é€šçŸ¥æµç¨‹å›¾

```
ç”¨æˆ·è®¾ç½®æé†’
    â”‚
    v
ReminderService.createReminder()
    â”‚
    v
NotificationService.scheduleReminder()
    â”‚
    v
UNUserNotificationCenter.add()
    â”‚
    v
ç³»ç»Ÿåœ¨è®¾å®šæ—¶é—´è§¦å‘é€šçŸ¥
    â”‚
    v
ç”¨æˆ·å“åº”é€šçŸ¥
    â”‚
    â”œâ”€â”€ "å·²æœç”¨" â”€â”€> åˆ›å»º IntakeRecord + ComplianceRecord(taken)
    â”‚
    â”œâ”€â”€ "ç¨åæé†’" â”€â”€> é‡æ–°è°ƒåº¦é€šçŸ¥ + ComplianceRecord(snoozed)
    â”‚
    â””â”€â”€ "è·³è¿‡" â”€â”€> ComplianceRecord(skipped)
```

### C. é€šçŸ¥å†…å®¹ç¤ºä¾‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’Š æœç”¨æé†’                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è¯¥æœç”¨ Vitamin D3 äº†                 â”‚
â”‚ æ¯æ—¥ 1 ç²’                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [å·²æœç”¨]  [ç¨åæé†’]  [è·³è¿‡]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### D. Info.plist é…ç½®

éœ€è¦æ·»åŠ çš„æƒé™æè¿°ï¼š

```xml
<key>NSUserNotificationsUsageDescription</key>
<string>éœ€è¦é€šçŸ¥æƒé™ä»¥æé†’æ‚¨æŒ‰æ—¶æœç”¨è¡¥å‰‚</string>
```
